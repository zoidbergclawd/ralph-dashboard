{
  "project": "Ralph Dashboard",
  "goal": "A real-time web UI for watching Ralph runs. Kanban-style PRD progress, live metrics, git state, test coverage \u2014 watch the magic happen.",
  "tech_stack": {
    "language": "TypeScript",
    "framework": "Next.js 14 (App Router)",
    "styling": "Tailwind CSS + shadcn/ui",
    "state": "React Query + WebSocket for real-time",
    "backend": "Ralph CLI exposes status via JSON file or simple HTTP endpoint",
    "testing": "Vitest + React Testing Library",
    "notes": "Static export possible for simplicity, or full Next.js for WebSocket support"
  },
  "context": {
    "target_user": "Developers watching Ralph autonomous coding loops",
    "constraints": "Must work with existing Ralph CLI, read .ralph/state.json and git state",
    "references": "Ralph CLI, Linear/Jira for kanban inspiration, Codecov for coverage UI"
  },
  "items": [
    {
      "id": 1,
      "category": "setup",
      "title": "Project scaffolding",
      "description": "Initialize Next.js 14 project with Tailwind, shadcn/ui, and basic layout",
      "priority": 1,
      "passes": true,
      "verification": "npm run dev serves app at localhost:3000 with basic layout",
      "steps": [
        "npx create-next-app@latest with TypeScript, Tailwind, App Router",
        "Install and configure shadcn/ui (npx shadcn@latest init)",
        "Create basic layout: header with title, main content area",
        "Add dark mode support (default dark)",
        "Verify dev server runs"
      ],
      "notes": ""
    },
    {
      "id": 2,
      "category": "setup",
      "title": "Test infrastructure",
      "description": "Set up Vitest and React Testing Library for unit testing",
      "priority": 1,
      "passes": true,
      "verification": "npm test runs and passes with at least one example test",
      "steps": [
        "Install vitest, @testing-library/react, @testing-library/jest-dom",
        "Create vitest.config.ts with jsdom environment",
        "Add 'test' script to package.json",
        "Create __tests__/example.test.ts with a passing test",
        "Verify npm test passes"
      ],
      "notes": "This MUST complete before any item with 'unit tests pass' verification"
    },
    {
      "id": 3,
      "category": "core",
      "title": "Ralph state reader",
      "description": "Module to read and parse Ralph run state from .ralph/state.json and prd.json",
      "priority": 1,
      "passes": true,
      "verification": "Unit tests pass for state parsing, handles missing/malformed files gracefully",
      "steps": [
        "Create lib/ralph-state.ts",
        "Type definitions for RalphState, PRDItem, Checkpoint",
        "Function to read state.json from a given project path",
        "Function to read and parse prd.json",
        "Merge state + PRD into unified view",
        "Handle edge cases: no state, partial state, corrupted files",
        "Write unit tests in __tests__/ralph-state.test.ts"
      ],
      "notes": ""
    },
    {
      "id": 4,
      "category": "core",
      "title": "Git state reader",
      "description": "Module to extract git information: branch, commits, diff stats",
      "priority": 1,
      "passes": false,
      "verification": "Unit tests pass for git state parsing",
      "steps": [
        "Create lib/git-state.ts",
        "Use simple-git or shell out to git commands",
        "Get: current branch, commit count on branch, last N commit messages",
        "Get: diff stats vs main/master (files changed, insertions, deletions)",
        "Get: uncommitted changes summary",
        "Write unit tests in __tests__/git-state.test.ts"
      ],
      "notes": ""
    },
    {
      "id": 5,
      "category": "core",
      "title": "Code metrics reader",
      "description": "Module to gather code metrics: lines of code, file count, test count",
      "priority": 1,
      "passes": false,
      "verification": "Unit tests pass for metrics calculation",
      "steps": [
        "Create lib/code-metrics.ts",
        "Use simple file counting (no external deps)",
        "Metrics: total LOC, LOC by language, file count, test file count",
        "Write unit tests in __tests__/code-metrics.test.ts"
      ],
      "notes": ""
    },
    {
      "id": 6,
      "category": "core",
      "title": "Test coverage reader",
      "description": "Module to parse test coverage reports (coverage.json, lcov, etc.)",
      "priority": 2,
      "passes": false,
      "verification": "Unit tests pass for coverage parsing",
      "steps": [
        "Create lib/coverage-reader.ts",
        "Support coverage.json (Vitest/Istanbul format)",
        "Support lcov.info (common format)",
        "Return: overall percentage, per-file percentages",
        "Write unit tests in __tests__/coverage-reader.test.ts"
      ],
      "notes": ""
    },
    {
      "id": 7,
      "category": "api",
      "title": "API routes for state",
      "description": "Next.js API routes to serve Ralph state, git state, metrics",
      "priority": 1,
      "passes": false,
      "verification": "Unit tests for /api/state pass",
      "steps": [
        "Create app/api/state/route.ts",
        "Accept project path as query param or env var",
        "Return combined state: ralph, git, metrics, coverage",
        "Add /api/health endpoint",
        "Handle errors gracefully with proper HTTP codes",
        "Write unit tests in __tests__/api-state.test.ts"
      ],
      "notes": ""
    },
    {
      "id": 8,
      "category": "ui",
      "title": "Kanban board component",
      "description": "Kanban-style board showing PRD items in columns: Todo, In Progress, Done",
      "priority": 1,
      "passes": false,
      "verification": "Component renders with items in correct columns (unit test)",
      "steps": [
        "Create components/KanbanBoard.tsx",
        "Columns: Backlog (not started), In Progress (current), Done (passes=true)",
        "Cards show: item title, category badge, priority indicator",
        "Click card to expand: full description, steps, verification",
        "Visual indication of current item (glow/pulse animation)",
        "Write unit tests in __tests__/KanbanBoard.test.tsx"
      ],
      "notes": ""
    },
    {
      "id": 9,
      "category": "ui",
      "title": "Progress overview panel",
      "description": "Summary panel showing overall progress: items done, time elapsed, ETA",
      "priority": 1,
      "passes": false,
      "verification": "Component renders progress correctly (unit test)",
      "steps": [
        "Create components/ProgressPanel.tsx",
        "Show: X of Y items complete",
        "Progress bar (percentage)",
        "Time elapsed since start",
        "Average time per item (for ETA)",
        "Current item title prominently displayed",
        "Write unit tests in __tests__/ProgressPanel.test.tsx"
      ],
      "notes": ""
    },
    {
      "id": 10,
      "category": "ui",
      "title": "Git state panel",
      "description": "Panel showing git information: branch, commits, diff summary",
      "priority": 1,
      "passes": false,
      "verification": "Component renders git info correctly (unit test)",
      "steps": [
        "Create components/GitPanel.tsx",
        "Show: branch name with copy button",
        "Show: commit count on branch",
        "Show: diff stats (files changed, +lines, -lines)",
        "Mini commit log (last 5 commits with messages)",
        "Write unit tests in __tests__/GitPanel.test.tsx"
      ],
      "notes": ""
    },
    {
      "id": 11,
      "category": "ui",
      "title": "Metrics panel",
      "description": "Panel showing code metrics: LOC, files, tests, coverage",
      "priority": 1,
      "passes": false,
      "verification": "Component renders metrics correctly (unit test)",
      "steps": [
        "Create components/MetricsPanel.tsx",
        "Show: total lines of code (with delta from start if available)",
        "Show: file count",
        "Show: test count",
        "Show: coverage percentage with color coding (red/yellow/green)",
        "Write unit tests in __tests__/MetricsPanel.test.tsx"
      ],
      "notes": ""
    },
    {
      "id": 12,
      "category": "ui",
      "title": "Activity log panel",
      "description": "Scrolling log of Ralph activity: checkpoints, commits, test runs",
      "priority": 2,
      "passes": false,
      "verification": "Component renders activity log correctly (unit test)",
      "steps": [
        "Create components/ActivityLog.tsx",
        "Parse checkpoints from state.json",
        "Show: timestamp, item completed, files changed",
        "Auto-scroll to latest, with pause on hover",
        "Color coding: green=success, yellow=warning, red=failure",
        "Write unit tests in __tests__/ActivityLog.test.tsx"
      ],
      "notes": ""
    },
    {
      "id": 13,
      "category": "realtime",
      "title": "Polling for live updates",
      "description": "Poll API for state changes, trigger UI updates",
      "priority": 1,
      "passes": false,
      "verification": "UI updates within 2 seconds of state.json change",
      "steps": [
        "Use React Query with refetchInterval (2 seconds)",
        "Visual indicator when data refreshes",
        "Optimistic updates for smoother UX",
        "Write unit test for polling hook"
      ],
      "notes": ""
    },
    {
      "id": 14,
      "category": "ui",
      "title": "Main dashboard layout",
      "description": "Compose all panels into a cohesive dashboard layout",
      "priority": 1,
      "passes": false,
      "verification": "Dashboard shows all panels in responsive grid layout",
      "steps": [
        "Create app/page.tsx as main dashboard",
        "Layout: Kanban board (main area), sidebar (progress, git, metrics)",
        "Activity log at bottom",
        "Responsive: stack on mobile, grid on desktop",
        "Dark theme by default"
      ],
      "notes": ""
    },
    {
      "id": 15,
      "category": "config",
      "title": "Project configuration",
      "description": "Allow configuring which project/path to monitor",
      "priority": 2,
      "passes": false,
      "verification": "Can set project path via env var or URL param",
      "steps": [
        "Support RALPH_PROJECT_PATH env var",
        "Support ?path= URL parameter",
        "Show current project path in header",
        "Persist last selected project in localStorage"
      ],
      "notes": ""
    },
    {
      "id": 16,
      "category": "polish",
      "title": "Animations and visual polish",
      "description": "Add animations for state changes and visual feedback",
      "priority": 2,
      "passes": false,
      "verification": "Cards animate when moving columns",
      "steps": [
        "Use Framer Motion for animations",
        "Card entrance/exit animations",
        "Pulse animation on current item",
        "Celebration animation when all items complete \ud83c\udf89"
      ],
      "notes": ""
    },
    {
      "id": 17,
      "category": "polish",
      "title": "Documentation and README",
      "description": "Add README with setup instructions and usage guide",
      "priority": 3,
      "passes": false,
      "verification": "README has install instructions and usage",
      "steps": [
        "Installation: npm install, configure path",
        "Usage: npm run dev, or npm run build for production",
        "Configuration options",
        "Integration with Ralph CLI"
      ],
      "notes": ""
    }
  ]
}