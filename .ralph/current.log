OpenAI Codex v0.98.0 (research preview)
--------
workdir: /Users/mcbee/Projects/agent-dashboard
model: gpt-5.3-codex
provider: openai
approval: never
sandbox: danger-full-access
reasoning effort: none
reasoning summaries: auto
session id: 019c2f64-0a94-7840-9207-27128ec8a203
--------
user
You are working on the project: Ralph Dashboard

Goal: A real-time web UI for watching Ralph runs. Kanban-style PRD progress, live metrics, git state, test coverage — watch the magic happen.

Current Item (15/17): Project configuration
Category: config
Priority: 2

Description:
Allow configuring which project/path to monitor

Steps:
  1. Support RALPH_PROJECT_PATH env var
  2. Support ?path= URL parameter
  3. Show current project path in header
  4. Persist last selected project in localStorage

Verification:
Can set project path via env var or URL param

Please implement this item. After completion:
1. Ensure all tests pass
2. Verify the implementation meets the verification criteria
3. Keep changes focused on this item only

mcp startup: no servers

thinking
**Activating task queue skill**
codex
I’m implementing item 15/17 by updating project-path configuration and persistence; I’ll quickly load the `do-work` skill instructions first, then inspect the code paths for config, URL params, header, and storage integration.
exec
/bin/zsh -lc 'cat /Users/mcbee/.agents/skills/do-work/SKILL.md' in /Users/mcbee/Projects/agent-dashboard succeeded in 203ms:
---
name: do-work
description: Task queue - add requests or process pending work
argument-hint: run | (task to capture) | verify | cleanup | version
upstream: https://raw.githubusercontent.com/bladnman/do-work/main/SKILL.md
---

# Do-Work Skill

A unified entry point for task capture and processing.

**Actions:**
- **do**: Capture new tasks/requests → creates UR folder (verbatim input) + REQ files (queue items), always paired
- **work**: Process pending requests → executes the queue
- **verify**: Evaluate captured REQs against original input → quality check
- **cleanup**: Consolidate archive → moves loose REQs into UR folders, closes completed URs

> **Core concept:** The do action always produces both a UR folder (preserving the original input) and REQ files (the queue items). Each REQ links back to its UR via `user_request` frontmatter. This pairing is mandatory for all requests — simple or complex.

## Routing Decision

thinking
**Planning skill usage announcement**
codex
Using the `do-work` skill for this turn because this is a queued implementation item; next I’m locating where project path config is currently sourced and displayed so I can wire env, URL, and localStorage precedence cleanly.
exec
/bin/zsh -lc "rg -n \"RALPH_PROJECT_PATH|project path|projectPath|\\?path=|localStorage|header\" -S ." in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc 'rg --files' in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc 'ls -la' in /Users/mcbee/Projects/agent-dashboard succeeded in 260ms:
total 680
drwxr-xr-x   25 mcbee  staff     800 Feb  5 14:51 .
drwxr-xr-x    6 mcbee  staff     192 Feb  5 14:01 ..
-rw-r--r--    1 mcbee  staff      61 Feb  5 14:28 .eslintrc.json
drwxr-xr-x   12 mcbee  staff     384 Feb  5 15:00 .git
-rw-r--r--    1 mcbee  staff     400 Feb  5 14:31 .gitignore
drwxr-xr-x   11 mcbee  staff     352 Feb  5 14:32 .next
drwxr-xr-x    4 mcbee  staff     128 Feb  5 14:31 .ralph
-rw-r--r--    1 mcbee  staff    1450 Feb  5 14:28 README.md
drwxr-xr-x   14 mcbee  staff     448 Feb  5 14:59 __tests__
drwxr-xr-x    8 mcbee  staff     256 Feb  5 14:41 app
drwxr-xr-x    8 mcbee  staff     256 Feb  5 14:59 components
-rw-r--r--    1 mcbee  staff     481 Feb  5 14:29 components.json
drwxr-xr-x    3 mcbee  staff      96 Feb  5 14:51 hooks
drwxr-xr-x    8 mcbee  staff     256 Feb  5 14:57 lib
-rw-r--r--    1 mcbee  staff     228 Feb  5 14:28 next-env.d.ts
-rw-r--r--    1 mcbee  staff      92 Feb  5 14:28 next.config.mjs
drwxr-xr-x  400 mcbee  staff   12800 Feb  5 14:51 node_modules
-rw-r--r--    1 mcbee  staff  284688 Feb  5 14:51 package-lock.json
-rw-r--r--    1 mcbee  staff     892 Feb  5 14:51 package.json
 succeeded in 268ms:
vitest.setup.ts
vitest.config.ts
tsconfig.json
components.json
lib/git-state.ts
lib/code-metrics.ts
lib/utils.ts
lib/coverage-state.ts
lib/coverage-reader.ts
lib/ralph-state.ts
hooks/use-dashboard-state.ts
package.json
package-lock.json
__tests__/KanbanBoard.test.tsx
__tests__/code-metrics.test.ts
__tests__/GitPanel.test.tsx
__tests__/api-state.test.ts
__tests__/git-state.test.ts
__tests__/MetricsPanel.test.tsx
__tests__/ProgressPanel.test.tsx
 succeeded in 278ms:
./lib/git-state.ts:128:function makeShellGitRunner(projectPath: string): (args: string[]) => Promise<string> {
./lib/git-state.ts:130:    const { stdout } = await execFileAsync("git", args, { cwd: projectPath });
./lib/git-state.ts:151:export async function readGitState(projectPath: string, options: ReadGitStateOptions = {}): Promise<GitState> {
./lib/git-state.ts:153:  const runGitCommand = options.runGitCommand ?? makeShellGitRunner(projectPath);
./lib/code-metrics.ts:98:  projectPath: string,
./lib/code-metrics.ts:108:    const files = await collectFilePaths(projectPath, excludedDirectories);
./lib/coverage-state.ts:78:export async function readCoverageState(projectPath: string): Promise<CoverageState> {
./lib/coverage-state.ts:80:    const absolutePath = path.join(projectPath, relativePath);
./lib/coverage-reader.ts:253:export async function readCoverageReport(projectPath: string): Promise<CoverageReaderResult> {
./lib/coverage-reader.ts:255:    const absolutePath = path.join(projectPath, candidate.relativePath);
./lib/ralph-state.ts:258:async function resolvePRDPath(projectPath: string, preferredPath?: string | null): Promise<string | null> {
./lib/ralph-state.ts:260:    return path.isAbsolute(preferredPath) ? preferredPath : path.join(projectPath, preferredPath);
./lib/ralph-state.ts:263:  const prdJsonPath = path.join(projectPath, "prd.json");
./lib/ralph-state.ts:273:    const entries = await fs.readdir(projectPath, { withFileTypes: true });
./lib/ralph-state.ts:276:      .map((entry) => path.join(projectPath, entry.name))
./lib/ralph-state.ts:285:export async function readRalphState(projectPath: string): Promise<FileReadResult<RalphState>> {
./lib/ralph-state.ts:286:  const statePath = path.join(projectPath, DEFAULT_STATE_PATH);
./lib/ralph-state.ts:305:  projectPath: string,
./lib/ralph-state.ts:308:  const resolvedPath = await resolvePRDPath(projectPath, preferredPath);
./lib/ralph-state.ts:312:      path: path.join(projectPath, "prd.json"),

thinking
**Planning path parameter support**
codex
I found server-side support for both `?projectPath` and `?path` already in `app/api/state/route.ts`; I’m now checking the client hook/layout to add URL `path` handling, header display, and localStorage persistence end-to-end.
exec
/bin/zsh -lc "sed -n '1,220p' app/api/state/route.ts" in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc "sed -n '1,260p' components/LiveDashboard.tsx" in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc "sed -n '1,260p' app/layout.tsx" in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc "sed -n '1,260p' hooks/use-dashboard-state.ts" in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc "sed -n '1,260p' __tests__/api-state.test.ts" in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc "sed -n '1,240p' app/page.tsx" in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc "sed -n '1,280p' __tests__/use-dashboard-state.test.tsx" in /Users/mcbee/Projects/agent-dashboard succeeded in 441ms:
import { stat } from "node:fs/promises";
import path from "node:path";

import { NextResponse } from "next/server";

import { readCodeMetrics } from "@/lib/code-metrics";
import { readCoverageState } from "@/lib/coverage-state";
import { readGitState } from "@/lib/git-state";
import { getRalphUnifiedView } from "@/lib/ralph-state";

function resolveProjectPath(request: Request): string | null {
  const { searchParams } = new URL(request.url);

  const fromQuery = searchParams.get("projectPath") ?? searchParams.get("path");
  const fromEnv = process.env.RALPH_PROJECT_PATH;
  const selected = fromQuery ?? fromEnv ?? null;

  if (!selected) {
    return null;
  }
 succeeded in 435ms:
import os from "node:os";
import path from "node:path";
import { promises as fs } from "node:fs";

import { afterEach, describe, expect, it } from "vitest";

import { GET as healthGET } from "../app/api/health/route";
import { GET as stateGET } from "../app/api/state/route";

const createdDirs: string[] = [];
const createdFiles: string[] = [];

async function makeProjectFixture(): Promise<string> {
  const projectDir = await fs.mkdtemp(path.join(os.tmpdir(), "api-state-test-"));
  createdDirs.push(projectDir);

  await fs.mkdir(path.join(projectDir, ".ralph"), { recursive: true });
  await fs.writeFile(
    path.join(projectDir, ".ralph", "state.json"),
    JSON.stringify(
 succeeded in 439ms:
import type { Metadata } from "next";
import localFont from "next/font/local";
import "./globals.css";

const geistSans = localFont({
  src: "./fonts/GeistVF.woff",
  variable: "--font-geist-sans",
  weight: "100 900",
});
const geistMono = localFont({
  src: "./fonts/GeistMonoVF.woff",
  variable: "--font-geist-mono",
  weight: "100 900",
});

export const metadata: Metadata = {
  title: "Ralph Dashboard",
  description: "Real-time web UI for watching Ralph runs",
};

 succeeded in 439ms:
"use client";

import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import React, { useEffect, useMemo, useState } from "react";

import ActivityLog from "@/components/ActivityLog";
import GitPanel from "@/components/GitPanel";
import KanbanBoard from "@/components/KanbanBoard";
import MetricsPanel from "@/components/MetricsPanel";
import ProgressPanel from "@/components/ProgressPanel";
import { useDashboardState } from "@/hooks/use-dashboard-state";

const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";

function formatLastUpdated(isoTimestamp: string | undefined): string {
  if (!isoTimestamp) {
    return "Never";
  }

  const timestamp = new Date(isoTimestamp);
 succeeded in 439ms:
"use client";

import { keepPreviousData, useQuery } from "@tanstack/react-query";

import type { CodeMetrics } from "@/lib/code-metrics";
import type { CoverageState } from "@/lib/coverage-state";
import type { GitState } from "@/lib/git-state";
import type { RalphUnifiedView } from "@/lib/ralph-state";

export const DASHBOARD_POLL_INTERVAL_MS = 2000;

export interface DashboardStateResponse {
  projectPath: string;
  timestamp: string;
  ralph: RalphUnifiedView;
  git: GitState;
  metrics: CodeMetrics;
  coverage: CoverageState;
}

 succeeded in 419ms:
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import { act, renderHook } from "@testing-library/react";
import React from "react";
import { afterEach, describe, expect, it, vi } from "vitest";

import { DASHBOARD_POLL_INTERVAL_MS, useDashboardState } from "@/hooks/use-dashboard-state";

interface DeferredPromise<T> {
  promise: Promise<T>;
  resolve: (value: T) => void;
  reject: (error: unknown) => void;
}

function createDeferred<T>(): DeferredPromise<T> {
  let resolve!: (value: T) => void;
  let reject!: (error: unknown) => void;
  const promise = new Promise<T>((innerResolve, innerReject) => {
    resolve = innerResolve;
    reject = innerReject;
  });
 succeeded in 445ms:
import LiveDashboard from "@/components/LiveDashboard";

export default function Home() {
  return <LiveDashboard />;
}

thinking
**Designing project path header**
codex
I’ve confirmed there’s no current client-side project selector state. I’m implementing precedence as `URL path` -> `localStorage` -> server/env fallback, then showing the resolved path in the top dashboard header area and persisting it after successful loads.
exec
/bin/zsh -lc 'cat package.json' in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc 'rg -n "LiveDashboard|Ralph Dashboard|projectPath|localStorage|searchParams" __tests__ components app hooks -S' in /Users/mcbee/Projects/agent-dashboard succeeded in 241ms:
{
  "name": "ralph-dashboard",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "test": "vitest run"
  },
  "dependencies": {
    "@tanstack/react-query": "^5.90.20",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "lucide-react": "^0.563.0",
    "next": "14.2.35",
    "react": "^18",
    "react-dom": "^18",
    "tailwind-merge": "^3.4.0",
 succeeded in 258ms:
hooks/use-dashboard-state.ts:13:  projectPath: string;
hooks/use-dashboard-state.ts:21:async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
hooks/use-dashboard-state.ts:23:  if (projectPath) {
hooks/use-dashboard-state.ts:24:    params.set("projectPath", projectPath);
hooks/use-dashboard-state.ts:41:export function useDashboardState(projectPath?: string) {
hooks/use-dashboard-state.ts:43:    queryKey: ["dashboard-state", projectPath ?? null],
hooks/use-dashboard-state.ts:44:    queryFn: () => fetchDashboardState(projectPath),
app/page.tsx:1:import LiveDashboard from "@/components/LiveDashboard";
app/page.tsx:4:  return <LiveDashboard />;
__tests__/code-metrics.test.ts:52:    await writeFile("README.md", ["# Ralph Dashboard", "", "watch the magic happen", ""].join("\n"), projectDir);
app/layout.tsx:17:  title: "Ralph Dashboard",
app/layout.tsx:33:            <h1 className="text-xl font-semibold tracking-tight">Ralph Dashboard</h1>
__tests__/api-state.test.ts:38:        project: "Ralph Dashboard",
__tests__/api-state.test.ts:63:function makeStateRequest(projectPath?: string): Request {
__tests__/api-state.test.ts:65:  if (projectPath) {
__tests__/api-state.test.ts:66:    url.searchParams.set("projectPath", projectPath);
__tests__/api-state.test.ts:80:  it("returns combined state using projectPath query parameter", async () => {
__tests__/api-state.test.ts:87:    expect(body.projectPath).toBe(projectDir);
__tests__/api-state.test.ts:103:    expect(body.projectPath).toBe(projectDir);
components/LiveDashboard.tsx:100:export default function LiveDashboard() {

thinking
**Adding project path header and params**
codex
I’m now editing `LiveDashboard` and `use-dashboard-state` to enforce `?path=` handling plus localStorage persistence and a visible header path, then I’ll add focused tests for URL-param behavior.
file update
M /Users/mcbee/Projects/agent-dashboard/hooks/use-dashboard-state.ts
@@ -23,3 +23,3 @@
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
apply_patch(auto_approved=true) exited 0 in 25ms:
Success. Updated the following files:
M hooks/use-dashboard-state.ts
file update:
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();

file update:
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();

file update
M /Users/mcbee/Projects/agent-dashboard/components/LiveDashboard.tsx
@@ -3,2 +3,3 @@
 import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
+import { useSearchParams } from "next/navigation";
 import React, { useEffect, useMemo, useState } from "react";
@@ -13,3 +14,29 @@
 const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";
+const PROJECT_PATH_STORAGE_KEY = "ralph-dashboard:last-project-path";
+
+function normalizeProjectPath(value: string | null | undefined): string | null {
+  if (!value) {
+    return null;
+  }
+
+  const trimmed = value.trim();
+  return trimmed.length > 0 ? trimmed : null;
+}
 
+function readStoredProjectPath(): string | null {
+  if (typeof window === "undefined") {
+    return null;
+  }
+
+  return normalizeProjectPath(window.localStorage.getItem(PROJECT_PATH_STORAGE_KEY));
+}
+
+function persistProjectPath(projectPath: string): void {
+  if (typeof window === "undefined") {
+    return;
+  }
+
+  window.localStorage.setItem(PROJECT_PATH_STORAGE_KEY, projectPath);
+}
+
 function formatLastUpdated(isoTimestamp: string | undefined): string {
@@ -28,3 +55,6 @@
 function DashboardBody() {
-  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState();
+  const searchParams = useSearchParams();
+  const urlProjectPath = normalizeProjectPath(searchParams.get("path"));
+  const [selectedProjectPath, setSelectedProjectPath] = useState<string | undefined>(urlProjectPath ?? undefined);
+  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState(selectedProjectPath);
   const [showUpdated, setShowUpdated] = useState(false);
@@ -32,2 +62,18 @@
   useEffect(() => {
+    if (urlProjectPath) {
+      setSelectedProjectPath(urlProjectPath);
+      persistProjectPath(urlProjectPath);
+      return;
+    }
+
+    const storedPath = readStoredProjectPath();
+    if (storedPath) {
+      setSelectedProjectPath(storedPath);
+      return;
+    }
+
+    setSelectedProjectPath(undefined);
+  }, [urlProjectPath]);
+
+  useEffect(() => {
     if (!dataUpdatedAt) {
@@ -41,8 +87,30 @@
 
+  useEffect(() => {
+    const resolvedProjectPath = normalizeProjectPath(data?.projectPath);
+    if (!resolvedProjectPath) {
+      return;
+    }
+
+    persistProjectPath(resolvedProjectPath);
+  }, [data?.projectPath]);
+
+  const currentProjectPath = data?.projectPath ?? selectedProjectPath ?? "Not configured";
+
+  const header = (
+    <header className="rounded-lg border border-border bg-card px-4 py-3 text-card-foreground md:px-5">
+      <h2 className="text-lg font-semibold tracking-tight">Run Overview</h2>
+      <p className="mt-1 text-sm text-muted-foreground">
+        Project path: <code className="text-foreground">{currentProjectPath}</code>
+      </p>
+    </header>
+  );
+
   if (isPending && !data) {
     return (
-      <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
-        <h2 className="text-lg font-medium">Run Overview</h2>
-        <p className="mt-2 text-sm text-muted-foreground">Loading live run state...</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
+          <p className="text-sm text-muted-foreground">Loading live run state...</p>
+        </section>
+      </div>
     );
@@ -54,6 +122,8 @@
     return (
-      <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
-        <h2 className="text-lg font-semibold">Run Overview</h2>
-        <p className="mt-2 text-sm text-red-200">{message}</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
+          <p className="text-sm text-red-200">{message}</p>
+        </section>
+      </div>
     );
@@ -66,2 +136,3 @@
     <div className="space-y-6">
+      {header}
       <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-5">
apply_patch(auto_approved=true) exited 0 in 34ms:
Success. Updated the following files:
M components/LiveDashboard.tsx
file update:
diff --git a/components/LiveDashboard.tsx b/components/LiveDashboard.tsx
index 77bdd334cc2dc47f4f2955d848ec0a8cdc8c6ce1..9e85b84156b99b8816d75a33668902c3cb852a80
--- a/components/LiveDashboard.tsx
+++ b/components/LiveDashboard.tsx
@@ -1,6 +1,7 @@
 "use client";
 
 import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
+import { useSearchParams } from "next/navigation";
 import React, { useEffect, useMemo, useState } from "react";
 
 import ActivityLog from "@/components/ActivityLog";
@@ -11,7 +12,33 @@
 import { useDashboardState } from "@/hooks/use-dashboard-state";
 
 const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";
+const PROJECT_PATH_STORAGE_KEY = "ralph-dashboard:last-project-path";
+
+function normalizeProjectPath(value: string | null | undefined): string | null {
+  if (!value) {
+    return null;
+  }
+
+  const trimmed = value.trim();
+  return trimmed.length > 0 ? trimmed : null;
+}
 
+function readStoredProjectPath(): string | null {
+  if (typeof window === "undefined") {
+    return null;
+  }
+
+  return normalizeProjectPath(window.localStorage.getItem(PROJECT_PATH_STORAGE_KEY));
+}
+
+function persistProjectPath(projectPath: string): void {
+  if (typeof window === "undefined") {
+    return;
+  }
+
+  window.localStorage.setItem(PROJECT_PATH_STORAGE_KEY, projectPath);
+}
+
 function formatLastUpdated(isoTimestamp: string | undefined): string {
   if (!isoTimestamp) {
     return "Never";
@@ -26,10 +53,29 @@
 }
 
 function DashboardBody() {
-  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState();
+  const searchParams = useSearchParams();
+  const urlProjectPath = normalizeProjectPath(searchParams.get("path"));
+  const [selectedProjectPath, setSelectedProjectPath] = useState<string | undefined>(urlProjectPath ?? undefined);
+  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState(selectedProjectPath);
   const [showUpdated, setShowUpdated] = useState(false);
 
   useEffect(() => {
+    if (urlProjectPath) {
+      setSelectedProjectPath(urlProjectPath);
+      persistProjectPath(urlProjectPath);
+      return;
+    }
+
+    const storedPath = readStoredProjectPath();
+    if (storedPath) {
+      setSelectedProjectPath(storedPath);
+      return;
+    }
+
+    setSelectedProjectPath(undefined);
+  }, [urlProjectPath]);
+
+  useEffect(() => {
     if (!dataUpdatedAt) {
       return;
     }
@@ -39,12 +85,34 @@
     return () => window.clearTimeout(timeout);
   }, [dataUpdatedAt]);
 
+  useEffect(() => {
+    const resolvedProjectPath = normalizeProjectPath(data?.projectPath);
+    if (!resolvedProjectPath) {
+      return;
+    }
+
+    persistProjectPath(resolvedProjectPath);
+  }, [data?.projectPath]);
+
+  const currentProjectPath = data?.projectPath ?? selectedProjectPath ?? "Not configured";
+
+  const header = (
+    <header className="rounded-lg border border-border bg-card px-4 py-3 text-card-foreground md:px-5">
+      <h2 className="text-lg font-semibold tracking-tight">Run Overview</h2>
+      <p className="mt-1 text-sm text-muted-foreground">
+        Project path: <code className="text-foreground">{currentProjectPath}</code>
+      </p>
+    </header>
+  );
+
   if (isPending && !data) {
     return (
-      <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
-        <h2 className="text-lg font-medium">Run Overview</h2>
-        <p className="mt-2 text-sm text-muted-foreground">Loading live run state...</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
+          <p className="text-sm text-muted-foreground">Loading live run state...</p>
+        </section>
+      </div>
     );
   }
 
@@ -52,10 +120,12 @@
     const message = error instanceof Error ? error.message : DEFAULT_ERROR_MESSAGE;
 
     return (
-      <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
-        <h2 className="text-lg font-semibold">Run Overview</h2>
-        <p className="mt-2 text-sm text-red-200">{message}</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
+          <p className="text-sm text-red-200">{message}</p>
+        </section>
+      </div>
     );
   }
 
@@ -64,6 +134,7 @@
 
   return (
     <div className="space-y-6">
+      {header}
       <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-5">
         <div className="flex flex-wrap items-center justify-between gap-2 text-sm">
           <div className="flex items-center gap-2">
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();

file update:
diff --git a/components/LiveDashboard.tsx b/components/LiveDashboard.tsx
index 77bdd334cc2dc47f4f2955d848ec0a8cdc8c6ce1..9e85b84156b99b8816d75a33668902c3cb852a80
--- a/components/LiveDashboard.tsx
+++ b/components/LiveDashboard.tsx
@@ -1,6 +1,7 @@
 "use client";
 
 import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
+import { useSearchParams } from "next/navigation";
 import React, { useEffect, useMemo, useState } from "react";
 
 import ActivityLog from "@/components/ActivityLog";
@@ -11,7 +12,33 @@
 import { useDashboardState } from "@/hooks/use-dashboard-state";
 
 const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";
+const PROJECT_PATH_STORAGE_KEY = "ralph-dashboard:last-project-path";
+
+function normalizeProjectPath(value: string | null | undefined): string | null {
+  if (!value) {
+    return null;
+  }
+
+  const trimmed = value.trim();
+  return trimmed.length > 0 ? trimmed : null;
+}
 
+function readStoredProjectPath(): string | null {
+  if (typeof window === "undefined") {
+    return null;
+  }
+
+  return normalizeProjectPath(window.localStorage.getItem(PROJECT_PATH_STORAGE_KEY));
+}
+
+function persistProjectPath(projectPath: string): void {
+  if (typeof window === "undefined") {
+    return;
+  }
+
+  window.localStorage.setItem(PROJECT_PATH_STORAGE_KEY, projectPath);
+}
+
 function formatLastUpdated(isoTimestamp: string | undefined): string {
   if (!isoTimestamp) {
     return "Never";
@@ -26,10 +53,29 @@
 }
 
 function DashboardBody() {
-  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState();
+  const searchParams = useSearchParams();
+  const urlProjectPath = normalizeProjectPath(searchParams.get("path"));
+  const [selectedProjectPath, setSelectedProjectPath] = useState<string | undefined>(urlProjectPath ?? undefined);
+  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState(selectedProjectPath);
   const [showUpdated, setShowUpdated] = useState(false);
 
   useEffect(() => {
+    if (urlProjectPath) {
+      setSelectedProjectPath(urlProjectPath);
+      persistProjectPath(urlProjectPath);
+      return;
+    }
+
+    const storedPath = readStoredProjectPath();
+    if (storedPath) {
+      setSelectedProjectPath(storedPath);
+      return;
+    }
+
+    setSelectedProjectPath(undefined);
+  }, [urlProjectPath]);
+
+  useEffect(() => {
     if (!dataUpdatedAt) {
       return;
     }
@@ -39,12 +85,34 @@
     return () => window.clearTimeout(timeout);
   }, [dataUpdatedAt]);
 
+  useEffect(() => {
+    const resolvedProjectPath = normalizeProjectPath(data?.projectPath);
+    if (!resolvedProjectPath) {
+      return;
+    }
+
+    persistProjectPath(resolvedProjectPath);
+  }, [data?.projectPath]);
+
+  const currentProjectPath = data?.projectPath ?? selectedProjectPath ?? "Not configured";
+
+  const header = (
+    <header className="rounded-lg border border-border bg-card px-4 py-3 text-card-foreground md:px-5">
+      <h2 className="text-lg font-semibold tracking-tight">Run Overview</h2>
+      <p className="mt-1 text-sm text-muted-foreground">
+        Project path: <code className="text-foreground">{currentProjectPath}</code>
+      </p>
+    </header>
+  );
+
   if (isPending && !data) {
     return (
-      <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
-        <h2 className="text-lg font-medium">Run Overview</h2>
-        <p className="mt-2 text-sm text-muted-foreground">Loading live run state...</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
+          <p className="text-sm text-muted-foreground">Loading live run state...</p>
+        </section>
+      </div>
     );
   }
 
@@ -52,10 +120,12 @@
     const message = error instanceof Error ? error.message : DEFAULT_ERROR_MESSAGE;
 
     return (
-      <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
-        <h2 className="text-lg font-semibold">Run Overview</h2>
-        <p className="mt-2 text-sm text-red-200">{message}</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
+          <p className="text-sm text-red-200">{message}</p>
+        </section>
+      </div>
     );
   }
 
@@ -64,6 +134,7 @@
 
   return (
     <div className="space-y-6">
+      {header}
       <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-5">
         <div className="flex flex-wrap items-center justify-between gap-2 text-sm">
           <div className="flex items-center gap-2">
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();


thinking
**Planning API and dashboard tests**
codex
I’ve applied the core UI and storage logic. Next I’m adding/adjusting tests to verify `?path=` is accepted and that the hook sends the `path` query key.
file update
M /Users/mcbee/Projects/agent-dashboard/__tests__/api-state.test.ts
@@ -94,2 +94,14 @@
 
+  it("returns combined state using path query parameter alias", async () => {
+    const projectDir = await makeProjectFixture();
+    const url = new URL("http://localhost/api/state");
+    url.searchParams.set("path", projectDir);
+
+    const response = await stateGET(new Request(url));
+    const body = (await response.json()) as Record<string, unknown>;
+
+    expect(response.status).toBe(200);
+    expect(body.projectPath).toBe(projectDir);
+  });
+
   it("uses RALPH_PROJECT_PATH when query param is not provided", async () => {
apply_patch(auto_approved=true) exited 0 in 43ms:
Success. Updated the following files:
M __tests__/api-state.test.ts
file update:
diff --git a/__tests__/api-state.test.ts b/__tests__/api-state.test.ts
index 9e10c2f6547b2d5905d4f16f802691b378db72b1..6ed7f6ec26f62ca7a22228e0a231c4430a0b21b9
--- a/__tests__/api-state.test.ts
+++ b/__tests__/api-state.test.ts
@@ -92,6 +92,18 @@
     expect(body).toHaveProperty("coverage");
   });
 
+  it("returns combined state using path query parameter alias", async () => {
+    const projectDir = await makeProjectFixture();
+    const url = new URL("http://localhost/api/state");
+    url.searchParams.set("path", projectDir);
+
+    const response = await stateGET(new Request(url));
+    const body = (await response.json()) as Record<string, unknown>;
+
+    expect(response.status).toBe(200);
+    expect(body.projectPath).toBe(projectDir);
+  });
+
   it("uses RALPH_PROJECT_PATH when query param is not provided", async () => {
     const projectDir = await makeProjectFixture();
     process.env.RALPH_PROJECT_PATH = projectDir;
diff --git a/components/LiveDashboard.tsx b/components/LiveDashboard.tsx
index 77bdd334cc2dc47f4f2955d848ec0a8cdc8c6ce1..9e85b84156b99b8816d75a33668902c3cb852a80
--- a/components/LiveDashboard.tsx
+++ b/components/LiveDashboard.tsx
@@ -1,6 +1,7 @@
 "use client";
 
 import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
+import { useSearchParams } from "next/navigation";
 import React, { useEffect, useMemo, useState } from "react";
 
 import ActivityLog from "@/components/ActivityLog";
@@ -11,7 +12,33 @@
 import { useDashboardState } from "@/hooks/use-dashboard-state";
 
 const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";
+const PROJECT_PATH_STORAGE_KEY = "ralph-dashboard:last-project-path";
+
+function normalizeProjectPath(value: string | null | undefined): string | null {
+  if (!value) {
+    return null;
+  }
+
+  const trimmed = value.trim();
+  return trimmed.length > 0 ? trimmed : null;
+}
 
+function readStoredProjectPath(): string | null {
+  if (typeof window === "undefined") {
+    return null;
+  }
+
+  return normalizeProjectPath(window.localStorage.getItem(PROJECT_PATH_STORAGE_KEY));
+}
+
+function persistProjectPath(projectPath: string): void {
+  if (typeof window === "undefined") {
+    return;
+  }
+
+  window.localStorage.setItem(PROJECT_PATH_STORAGE_KEY, projectPath);
+}
+
 function formatLastUpdated(isoTimestamp: string | undefined): string {
   if (!isoTimestamp) {
     return "Never";
@@ -26,10 +53,29 @@
 }
 
 function DashboardBody() {
-  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState();
+  const searchParams = useSearchParams();
+  const urlProjectPath = normalizeProjectPath(searchParams.get("path"));
+  const [selectedProjectPath, setSelectedProjectPath] = useState<string | undefined>(urlProjectPath ?? undefined);
+  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState(selectedProjectPath);
   const [showUpdated, setShowUpdated] = useState(false);
 
   useEffect(() => {
+    if (urlProjectPath) {
+      setSelectedProjectPath(urlProjectPath);
+      persistProjectPath(urlProjectPath);
+      return;
+    }
+
+    const storedPath = readStoredProjectPath();
+    if (storedPath) {
+      setSelectedProjectPath(storedPath);
+      return;
+    }
+
+    setSelectedProjectPath(undefined);
+  }, [urlProjectPath]);
+
+  useEffect(() => {
     if (!dataUpdatedAt) {
       return;
     }
@@ -39,12 +85,34 @@
     return () => window.clearTimeout(timeout);
   }, [dataUpdatedAt]);
 
+  useEffect(() => {
+    const resolvedProjectPath = normalizeProjectPath(data?.projectPath);
+    if (!resolvedProjectPath) {
+      return;
+    }
+
+    persistProjectPath(resolvedProjectPath);
+  }, [data?.projectPath]);
+
+  const currentProjectPath = data?.projectPath ?? selectedProjectPath ?? "Not configured";
+
+  const header = (
+    <header className="rounded-lg border border-border bg-card px-4 py-3 text-card-foreground md:px-5">
+      <h2 className="text-lg font-semibold tracking-tight">Run Overview</h2>
+      <p className="mt-1 text-sm text-muted-foreground">
+        Project path: <code className="text-foreground">{currentProjectPath}</code>
+      </p>
+    </header>
+  );
+
   if (isPending && !data) {
     return (
-      <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
-        <h2 className="text-lg font-medium">Run Overview</h2>
-        <p className="mt-2 text-sm text-muted-foreground">Loading live run state...</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
+          <p className="text-sm text-muted-foreground">Loading live run state...</p>
+        </section>
+      </div>
     );
   }
 
@@ -52,10 +120,12 @@
     const message = error instanceof Error ? error.message : DEFAULT_ERROR_MESSAGE;
 
     return (
-      <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
-        <h2 className="text-lg font-semibold">Run Overview</h2>
-        <p className="mt-2 text-sm text-red-200">{message}</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
+          <p className="text-sm text-red-200">{message}</p>
+        </section>
+      </div>
     );
   }
 
@@ -64,6 +134,7 @@
 
   return (
     <div className="space-y-6">
+      {header}
       <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-5">
         <div className="flex flex-wrap items-center justify-between gap-2 text-sm">
           <div className="flex items-center gap-2">
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();

file update:
diff --git a/__tests__/api-state.test.ts b/__tests__/api-state.test.ts
index 9e10c2f6547b2d5905d4f16f802691b378db72b1..6ed7f6ec26f62ca7a22228e0a231c4430a0b21b9
--- a/__tests__/api-state.test.ts
+++ b/__tests__/api-state.test.ts
@@ -92,6 +92,18 @@
     expect(body).toHaveProperty("coverage");
   });
 
+  it("returns combined state using path query parameter alias", async () => {
+    const projectDir = await makeProjectFixture();
+    const url = new URL("http://localhost/api/state");
+    url.searchParams.set("path", projectDir);
+
+    const response = await stateGET(new Request(url));
+    const body = (await response.json()) as Record<string, unknown>;
+
+    expect(response.status).toBe(200);
+    expect(body.projectPath).toBe(projectDir);
+  });
+
   it("uses RALPH_PROJECT_PATH when query param is not provided", async () => {
     const projectDir = await makeProjectFixture();
     process.env.RALPH_PROJECT_PATH = projectDir;
diff --git a/components/LiveDashboard.tsx b/components/LiveDashboard.tsx
index 77bdd334cc2dc47f4f2955d848ec0a8cdc8c6ce1..9e85b84156b99b8816d75a33668902c3cb852a80
--- a/components/LiveDashboard.tsx
+++ b/components/LiveDashboard.tsx
@@ -1,6 +1,7 @@
 "use client";
 
 import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
+import { useSearchParams } from "next/navigation";
 import React, { useEffect, useMemo, useState } from "react";
 
 import ActivityLog from "@/components/ActivityLog";
@@ -11,7 +12,33 @@
 import { useDashboardState } from "@/hooks/use-dashboard-state";
 
 const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";
+const PROJECT_PATH_STORAGE_KEY = "ralph-dashboard:last-project-path";
+
+function normalizeProjectPath(value: string | null | undefined): string | null {
+  if (!value) {
+    return null;
+  }
+
+  const trimmed = value.trim();
+  return trimmed.length > 0 ? trimmed : null;
+}
 
+function readStoredProjectPath(): string | null {
+  if (typeof window === "undefined") {
+    return null;
+  }
+
+  return normalizeProjectPath(window.localStorage.getItem(PROJECT_PATH_STORAGE_KEY));
+}
+
+function persistProjectPath(projectPath: string): void {
+  if (typeof window === "undefined") {
+    return;
+  }
+
+  window.localStorage.setItem(PROJECT_PATH_STORAGE_KEY, projectPath);
+}
+
 function formatLastUpdated(isoTimestamp: string | undefined): string {
   if (!isoTimestamp) {
     return "Never";
@@ -26,10 +53,29 @@
 }
 
 function DashboardBody() {
-  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState();
+  const searchParams = useSearchParams();
+  const urlProjectPath = normalizeProjectPath(searchParams.get("path"));
+  const [selectedProjectPath, setSelectedProjectPath] = useState<string | undefined>(urlProjectPath ?? undefined);
+  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState(selectedProjectPath);
   const [showUpdated, setShowUpdated] = useState(false);
 
   useEffect(() => {
+    if (urlProjectPath) {
+      setSelectedProjectPath(urlProjectPath);
+      persistProjectPath(urlProjectPath);
+      return;
+    }
+
+    const storedPath = readStoredProjectPath();
+    if (storedPath) {
+      setSelectedProjectPath(storedPath);
+      return;
+    }
+
+    setSelectedProjectPath(undefined);
+  }, [urlProjectPath]);
+
+  useEffect(() => {
     if (!dataUpdatedAt) {
       return;
     }
@@ -39,12 +85,34 @@
     return () => window.clearTimeout(timeout);
   }, [dataUpdatedAt]);
 
+  useEffect(() => {
+    const resolvedProjectPath = normalizeProjectPath(data?.projectPath);
+    if (!resolvedProjectPath) {
+      return;
+    }
+
+    persistProjectPath(resolvedProjectPath);
+  }, [data?.projectPath]);
+
+  const currentProjectPath = data?.projectPath ?? selectedProjectPath ?? "Not configured";
+
+  const header = (
+    <header className="rounded-lg border border-border bg-card px-4 py-3 text-card-foreground md:px-5">
+      <h2 className="text-lg font-semibold tracking-tight">Run Overview</h2>
+      <p className="mt-1 text-sm text-muted-foreground">
+        Project path: <code className="text-foreground">{currentProjectPath}</code>
+      </p>
+    </header>
+  );
+
   if (isPending && !data) {
     return (
-      <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
-        <h2 className="text-lg font-medium">Run Overview</h2>
-        <p className="mt-2 text-sm text-muted-foreground">Loading live run state...</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
+          <p className="text-sm text-muted-foreground">Loading live run state...</p>
+        </section>
+      </div>
     );
   }
 
@@ -52,10 +120,12 @@
     const message = error instanceof Error ? error.message : DEFAULT_ERROR_MESSAGE;
 
     return (
-      <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
-        <h2 className="text-lg font-semibold">Run Overview</h2>
-        <p className="mt-2 text-sm text-red-200">{message}</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
+          <p className="text-sm text-red-200">{message}</p>
+        </section>
+      </div>
     );
   }
 
@@ -64,6 +134,7 @@
 
   return (
     <div className="space-y-6">
+      {header}
       <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-5">
         <div className="flex flex-wrap items-center justify-between gap-2 text-sm">
           <div className="flex items-center gap-2">
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();

file update
M /Users/mcbee/Projects/agent-dashboard/__tests__/use-dashboard-state.test.tsx
@@ -106,2 +106,13 @@
 describe("useDashboardState", () => {
+  it("uses the path query parameter when a project path is provided", async () => {
+    const fetchMock = vi.fn<typeof fetch>().mockResolvedValueOnce(makeSuccessResponse(basePayload));
+    vi.stubGlobal("fetch", fetchMock);
+
+    renderHook(() => useDashboardState("/tmp/with-space project"), { wrapper: makeWrapper() });
+    await flushReactQuery();
+
+    expect(fetchMock).toHaveBeenCalledTimes(1);
+    expect(fetchMock.mock.calls[0]?.[0]).toBe("/api/state?path=%2Ftmp%2Fwith-space+project");
+  });
+
   it("polls for new state every 2 seconds", async () => {
apply_patch(auto_approved=true) exited 0 in 52ms:
Success. Updated the following files:
M __tests__/use-dashboard-state.test.tsx
file update:
diff --git a/__tests__/api-state.test.ts b/__tests__/api-state.test.ts
index 9e10c2f6547b2d5905d4f16f802691b378db72b1..6ed7f6ec26f62ca7a22228e0a231c4430a0b21b9
--- a/__tests__/api-state.test.ts
+++ b/__tests__/api-state.test.ts
@@ -92,6 +92,18 @@
     expect(body).toHaveProperty("coverage");
   });
 
+  it("returns combined state using path query parameter alias", async () => {
+    const projectDir = await makeProjectFixture();
+    const url = new URL("http://localhost/api/state");
+    url.searchParams.set("path", projectDir);
+
+    const response = await stateGET(new Request(url));
+    const body = (await response.json()) as Record<string, unknown>;
+
+    expect(response.status).toBe(200);
+    expect(body.projectPath).toBe(projectDir);
+  });
+
   it("uses RALPH_PROJECT_PATH when query param is not provided", async () => {
     const projectDir = await makeProjectFixture();
     process.env.RALPH_PROJECT_PATH = projectDir;
diff --git a/__tests__/use-dashboard-state.test.tsx b/__tests__/use-dashboard-state.test.tsx
index 6bc0b0162b387ff638e51d5784db78a4b3b947f1..6e5a04a627d06470163ec1b1a82906e62afbd4e8
--- a/__tests__/use-dashboard-state.test.tsx
+++ b/__tests__/use-dashboard-state.test.tsx
@@ -104,6 +104,17 @@
 });
 
 describe("useDashboardState", () => {
+  it("uses the path query parameter when a project path is provided", async () => {
+    const fetchMock = vi.fn<typeof fetch>().mockResolvedValueOnce(makeSuccessResponse(basePayload));
+    vi.stubGlobal("fetch", fetchMock);
+
+    renderHook(() => useDashboardState("/tmp/with-space project"), { wrapper: makeWrapper() });
+    await flushReactQuery();
+
+    expect(fetchMock).toHaveBeenCalledTimes(1);
+    expect(fetchMock.mock.calls[0]?.[0]).toBe("/api/state?path=%2Ftmp%2Fwith-space+project");
+  });
+
   it("polls for new state every 2 seconds", async () => {
     vi.useFakeTimers();
 
diff --git a/components/LiveDashboard.tsx b/components/LiveDashboard.tsx
index 77bdd334cc2dc47f4f2955d848ec0a8cdc8c6ce1..9e85b84156b99b8816d75a33668902c3cb852a80
--- a/components/LiveDashboard.tsx
+++ b/components/LiveDashboard.tsx
@@ -1,6 +1,7 @@
 "use client";
 
 import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
+import { useSearchParams } from "next/navigation";
 import React, { useEffect, useMemo, useState } from "react";
 
 import ActivityLog from "@/components/ActivityLog";
@@ -11,7 +12,33 @@
 import { useDashboardState } from "@/hooks/use-dashboard-state";
 
 const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";
+const PROJECT_PATH_STORAGE_KEY = "ralph-dashboard:last-project-path";
+
+function normalizeProjectPath(value: string | null | undefined): string | null {
+  if (!value) {
+    return null;
+  }
+
+  const trimmed = value.trim();
+  return trimmed.length > 0 ? trimmed : null;
+}
 
+function readStoredProjectPath(): string | null {
+  if (typeof window === "undefined") {
+    return null;
+  }
+
+  return normalizeProjectPath(window.localStorage.getItem(PROJECT_PATH_STORAGE_KEY));
+}
+
+function persistProjectPath(projectPath: string): void {
+  if (typeof window === "undefined") {
+    return;
+  }
+
+  window.localStorage.setItem(PROJECT_PATH_STORAGE_KEY, projectPath);
+}
+
 function formatLastUpdated(isoTimestamp: string | undefined): string {
   if (!isoTimestamp) {
     return "Never";
@@ -26,10 +53,29 @@
 }
 
 function DashboardBody() {
-  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState();
+  const searchParams = useSearchParams();
+  const urlProjectPath = normalizeProjectPath(searchParams.get("path"));
+  const [selectedProjectPath, setSelectedProjectPath] = useState<string | undefined>(urlProjectPath ?? undefined);
+  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState(selectedProjectPath);
   const [showUpdated, setShowUpdated] = useState(false);
 
   useEffect(() => {
+    if (urlProjectPath) {
+      setSelectedProjectPath(urlProjectPath);
+      persistProjectPath(urlProjectPath);
+      return;
+    }
+
+    const storedPath = readStoredProjectPath();
+    if (storedPath) {
+      setSelectedProjectPath(storedPath);
+      return;
+    }
+
+    setSelectedProjectPath(undefined);
+  }, [urlProjectPath]);
+
+  useEffect(() => {
     if (!dataUpdatedAt) {
       return;
     }
@@ -39,12 +85,34 @@
     return () => window.clearTimeout(timeout);
   }, [dataUpdatedAt]);
 
+  useEffect(() => {
+    const resolvedProjectPath = normalizeProjectPath(data?.projectPath);
+    if (!resolvedProjectPath) {
+      return;
+    }
+
+    persistProjectPath(resolvedProjectPath);
+  }, [data?.projectPath]);
+
+  const currentProjectPath = data?.projectPath ?? selectedProjectPath ?? "Not configured";
+
+  const header = (
+    <header className="rounded-lg border border-border bg-card px-4 py-3 text-card-foreground md:px-5">
+      <h2 className="text-lg font-semibold tracking-tight">Run Overview</h2>
+      <p className="mt-1 text-sm text-muted-foreground">
+        Project path: <code className="text-foreground">{currentProjectPath}</code>
+      </p>
+    </header>
+  );
+
   if (isPending && !data) {
     return (
-      <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
-        <h2 className="text-lg font-medium">Run Overview</h2>
-        <p className="mt-2 text-sm text-muted-foreground">Loading live run state...</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
+          <p className="text-sm text-muted-foreground">Loading live run state...</p>
+        </section>
+      </div>
     );
   }
 
@@ -52,10 +120,12 @@
     const message = error instanceof Error ? error.message : DEFAULT_ERROR_MESSAGE;
 
     return (
-      <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
-        <h2 className="text-lg font-semibold">Run Overview</h2>
-        <p className="mt-2 text-sm text-red-200">{message}</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
+          <p className="text-sm text-red-200">{message}</p>
+        </section>
+      </div>
     );
   }
 
@@ -64,6 +134,7 @@
 
   return (
     <div className="space-y-6">
+      {header}
       <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-5">
         <div className="flex flex-wrap items-center justify-between gap-2 text-sm">
           <div className="flex items-center gap-2">
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();

file update:
diff --git a/__tests__/api-state.test.ts b/__tests__/api-state.test.ts
index 9e10c2f6547b2d5905d4f16f802691b378db72b1..6ed7f6ec26f62ca7a22228e0a231c4430a0b21b9
--- a/__tests__/api-state.test.ts
+++ b/__tests__/api-state.test.ts
@@ -92,6 +92,18 @@
     expect(body).toHaveProperty("coverage");
   });
 
+  it("returns combined state using path query parameter alias", async () => {
+    const projectDir = await makeProjectFixture();
+    const url = new URL("http://localhost/api/state");
+    url.searchParams.set("path", projectDir);
+
+    const response = await stateGET(new Request(url));
+    const body = (await response.json()) as Record<string, unknown>;
+
+    expect(response.status).toBe(200);
+    expect(body.projectPath).toBe(projectDir);
+  });
+
   it("uses RALPH_PROJECT_PATH when query param is not provided", async () => {
     const projectDir = await makeProjectFixture();
     process.env.RALPH_PROJECT_PATH = projectDir;
diff --git a/__tests__/use-dashboard-state.test.tsx b/__tests__/use-dashboard-state.test.tsx
index 6bc0b0162b387ff638e51d5784db78a4b3b947f1..6e5a04a627d06470163ec1b1a82906e62afbd4e8
--- a/__tests__/use-dashboard-state.test.tsx
+++ b/__tests__/use-dashboard-state.test.tsx
@@ -104,6 +104,17 @@
 });
 
 describe("useDashboardState", () => {
+  it("uses the path query parameter when a project path is provided", async () => {
+    const fetchMock = vi.fn<typeof fetch>().mockResolvedValueOnce(makeSuccessResponse(basePayload));
+    vi.stubGlobal("fetch", fetchMock);
+
+    renderHook(() => useDashboardState("/tmp/with-space project"), { wrapper: makeWrapper() });
+    await flushReactQuery();
+
+    expect(fetchMock).toHaveBeenCalledTimes(1);
+    expect(fetchMock.mock.calls[0]?.[0]).toBe("/api/state?path=%2Ftmp%2Fwith-space+project");
+  });
+
   it("polls for new state every 2 seconds", async () => {
     vi.useFakeTimers();
 
diff --git a/components/LiveDashboard.tsx b/components/LiveDashboard.tsx
index 77bdd334cc2dc47f4f2955d848ec0a8cdc8c6ce1..9e85b84156b99b8816d75a33668902c3cb852a80
--- a/components/LiveDashboard.tsx
+++ b/components/LiveDashboard.tsx
@@ -1,6 +1,7 @@
 "use client";
 
 import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
+import { useSearchParams } from "next/navigation";
 import React, { useEffect, useMemo, useState } from "react";
 
 import ActivityLog from "@/components/ActivityLog";
@@ -11,7 +12,33 @@
 import { useDashboardState } from "@/hooks/use-dashboard-state";
 
 const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";
+const PROJECT_PATH_STORAGE_KEY = "ralph-dashboard:last-project-path";
+
+function normalizeProjectPath(value: string | null | undefined): string | null {
+  if (!value) {
+    return null;
+  }
+
+  const trimmed = value.trim();
+  return trimmed.length > 0 ? trimmed : null;
+}
 
+function readStoredProjectPath(): string | null {
+  if (typeof window === "undefined") {
+    return null;
+  }
+
+  return normalizeProjectPath(window.localStorage.getItem(PROJECT_PATH_STORAGE_KEY));
+}
+
+function persistProjectPath(projectPath: string): void {
+  if (typeof window === "undefined") {
+    return;
+  }
+
+  window.localStorage.setItem(PROJECT_PATH_STORAGE_KEY, projectPath);
+}
+
 function formatLastUpdated(isoTimestamp: string | undefined): string {
   if (!isoTimestamp) {
     return "Never";
@@ -26,10 +53,29 @@
 }
 
 function DashboardBody() {
-  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState();
+  const searchParams = useSearchParams();
+  const urlProjectPath = normalizeProjectPath(searchParams.get("path"));
+  const [selectedProjectPath, setSelectedProjectPath] = useState<string | undefined>(urlProjectPath ?? undefined);
+  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState(selectedProjectPath);
   const [showUpdated, setShowUpdated] = useState(false);
 
   useEffect(() => {
+    if (urlProjectPath) {
+      setSelectedProjectPath(urlProjectPath);
+      persistProjectPath(urlProjectPath);
+      return;
+    }
+
+    const storedPath = readStoredProjectPath();
+    if (storedPath) {
+      setSelectedProjectPath(storedPath);
+      return;
+    }
+
+    setSelectedProjectPath(undefined);
+  }, [urlProjectPath]);
+
+  useEffect(() => {
     if (!dataUpdatedAt) {
       return;
     }
@@ -39,12 +85,34 @@
     return () => window.clearTimeout(timeout);
   }, [dataUpdatedAt]);
 
+  useEffect(() => {
+    const resolvedProjectPath = normalizeProjectPath(data?.projectPath);
+    if (!resolvedProjectPath) {
+      return;
+    }
+
+    persistProjectPath(resolvedProjectPath);
+  }, [data?.projectPath]);
+
+  const currentProjectPath = data?.projectPath ?? selectedProjectPath ?? "Not configured";
+
+  const header = (
+    <header className="rounded-lg border border-border bg-card px-4 py-3 text-card-foreground md:px-5">
+      <h2 className="text-lg font-semibold tracking-tight">Run Overview</h2>
+      <p className="mt-1 text-sm text-muted-foreground">
+        Project path: <code className="text-foreground">{currentProjectPath}</code>
+      </p>
+    </header>
+  );
+
   if (isPending && !data) {
     return (
-      <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
-        <h2 className="text-lg font-medium">Run Overview</h2>
-        <p className="mt-2 text-sm text-muted-foreground">Loading live run state...</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
+          <p className="text-sm text-muted-foreground">Loading live run state...</p>
+        </section>
+      </div>
     );
   }
 
@@ -52,10 +120,12 @@
     const message = error instanceof Error ? error.message : DEFAULT_ERROR_MESSAGE;
 
     return (
-      <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
-        <h2 className="text-lg font-semibold">Run Overview</h2>
-        <p className="mt-2 text-sm text-red-200">{message}</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
+          <p className="text-sm text-red-200">{message}</p>
+        </section>
+      </div>
     );
   }
 
@@ -64,6 +134,7 @@
 
   return (
     <div className="space-y-6">
+      {header}
       <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-5">
         <div className="flex flex-wrap items-center justify-between gap-2 text-sm">
           <div className="flex items-center gap-2">
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();


thinking
**Running tests to verify code**
codex
I’m running the full test suite now to ensure the changes stay scoped and everything still passes.
exec
/bin/zsh -lc 'npm test' in /Users/mcbee/Projects/agent-dashboardfile update:
diff --git a/__tests__/api-state.test.ts b/__tests__/api-state.test.ts
index 9e10c2f6547b2d5905d4f16f802691b378db72b1..6ed7f6ec26f62ca7a22228e0a231c4430a0b21b9
--- a/__tests__/api-state.test.ts
+++ b/__tests__/api-state.test.ts
@@ -92,6 +92,18 @@
     expect(body).toHaveProperty("coverage");
   });
 
+  it("returns combined state using path query parameter alias", async () => {
+    const projectDir = await makeProjectFixture();
+    const url = new URL("http://localhost/api/state");
+    url.searchParams.set("path", projectDir);
+
+    const response = await stateGET(new Request(url));
+    const body = (await response.json()) as Record<string, unknown>;
+
+    expect(response.status).toBe(200);
+    expect(body.projectPath).toBe(projectDir);
+  });
+
   it("uses RALPH_PROJECT_PATH when query param is not provided", async () => {
     const projectDir = await makeProjectFixture();
     process.env.RALPH_PROJECT_PATH = projectDir;
diff --git a/__tests__/use-dashboard-state.test.tsx b/__tests__/use-dashboard-state.test.tsx
index 6bc0b0162b387ff638e51d5784db78a4b3b947f1..6e5a04a627d06470163ec1b1a82906e62afbd4e8
--- a/__tests__/use-dashboard-state.test.tsx
+++ b/__tests__/use-dashboard-state.test.tsx
@@ -104,6 +104,17 @@
 });
 
 describe("useDashboardState", () => {
+  it("uses the path query parameter when a project path is provided", async () => {
+    const fetchMock = vi.fn<typeof fetch>().mockResolvedValueOnce(makeSuccessResponse(basePayload));
+    vi.stubGlobal("fetch", fetchMock);
+
+    renderHook(() => useDashboardState("/tmp/with-space project"), { wrapper: makeWrapper() });
+    await flushReactQuery();
+
+    expect(fetchMock).toHaveBeenCalledTimes(1);
+    expect(fetchMock.mock.calls[0]?.[0]).toBe("/api/state?path=%2Ftmp%2Fwith-space+project");
+  });
+
   it("polls for new state every 2 seconds", async () => {
     vi.useFakeTimers();
 
diff --git a/components/LiveDashboard.tsx b/components/LiveDashboard.tsx
index 77bdd334cc2dc47f4f2955d848ec0a8cdc8c6ce1..9e85b84156b99b8816d75a33668902c3cb852a80
--- a/components/LiveDashboard.tsx
+++ b/components/LiveDashboard.tsx
@@ -1,6 +1,7 @@
 "use client";
 
 import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
+import { useSearchParams } from "next/navigation";
 import React, { useEffect, useMemo, useState } from "react";
 
 import ActivityLog from "@/components/ActivityLog";
@@ -11,7 +12,33 @@
 import { useDashboardState } from "@/hooks/use-dashboard-state";
 
 const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";
+const PROJECT_PATH_STORAGE_KEY = "ralph-dashboard:last-project-path";
+
+function normalizeProjectPath(value: string | null | undefined): string | null {
+  if (!value) {
+    return null;
+  }
+
+  const trimmed = value.trim();
+  return trimmed.length > 0 ? trimmed : null;
+}
 
+function readStoredProjectPath(): string | null {
+  if (typeof window === "undefined") {
+    return null;
+  }
+
+  return normalizeProjectPath(window.localStorage.getItem(PROJECT_PATH_STORAGE_KEY));
+}
+
+function persistProjectPath(projectPath: string): void {
+  if (typeof window === "undefined") {
+    return;
+  }
+
+  window.localStorage.setItem(PROJECT_PATH_STORAGE_KEY, projectPath);
+}
+
 function formatLastUpdated(isoTimestamp: string | undefined): string {
   if (!isoTimestamp) {
     return "Never";
@@ -26,10 +53,29 @@
 }
 
 function DashboardBody() {
-  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState();
+  const searchParams = useSearchParams();
+  const urlProjectPath = normalizeProjectPath(searchParams.get("path"));
+  const [selectedProjectPath, setSelectedProjectPath] = useState<string | undefined>(urlProjectPath ?? undefined);
+  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState(selectedProjectPath);
   const [showUpdated, setShowUpdated] = useState(false);
 
   useEffect(() => {
+    if (urlProjectPath) {
+      setSelectedProjectPath(urlProjectPath);
+      persistProjectPath(urlProjectPath);
+      return;
+    }
+
+    const storedPath = readStoredProjectPath();
+    if (storedPath) {
+      setSelectedProjectPath(storedPath);
+      return;
+    }
+
+    setSelectedProjectPath(undefined);
+  }, [urlProjectPath]);
+
+  useEffect(() => {
     if (!dataUpdatedAt) {
       return;
     }
@@ -39,12 +85,34 @@
     return () => window.clearTimeout(timeout);
   }, [dataUpdatedAt]);
 
+  useEffect(() => {
+    const resolvedProjectPath = normalizeProjectPath(data?.projectPath);
+    if (!resolvedProjectPath) {
+      return;
+    }
+
+    persistProjectPath(resolvedProjectPath);
+  }, [data?.projectPath]);
+
+  const currentProjectPath = data?.projectPath ?? selectedProjectPath ?? "Not configured";
+
+  const header = (
+    <header className="rounded-lg border border-border bg-card px-4 py-3 text-card-foreground md:px-5">
+      <h2 className="text-lg font-semibold tracking-tight">Run Overview</h2>
+      <p className="mt-1 text-sm text-muted-foreground">
+        Project path: <code className="text-foreground">{currentProjectPath}</code>
+      </p>
+    </header>
+  );
+
   if (isPending && !data) {
     return (
-      <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
-        <h2 className="text-lg font-medium">Run Overview</h2>
-        <p className="mt-2 text-sm text-muted-foreground">Loading live run state...</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
+          <p className="text-sm text-muted-foreground">Loading live run state...</p>
+        </section>
+      </div>
     );
   }
 
@@ -52,10 +120,12 @@
     const message = error instanceof Error ? error.message : DEFAULT_ERROR_MESSAGE;
 
     return (
-      <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
-        <h2 className="text-lg font-semibold">Run Overview</h2>
-        <p className="mt-2 text-sm text-red-200">{message}</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
+          <p className="text-sm text-red-200">{message}</p>
+        </section>
+      </div>
     );
   }
 
@@ -64,6 +134,7 @@
 
   return (
     <div className="space-y-6">
+      {header}
       <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-5">
         <div className="flex flex-wrap items-center justify-between gap-2 text-sm">
           <div className="flex items-center gap-2">
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();

 exited 1 in 1.64s:

> ralph-dashboard@0.1.0 test
> vitest run


 RUN  v4.0.18 /Users/mcbee/Projects/agent-dashboard

 ✓ __tests__/coverage-reader.test.ts (7 tests) 47ms
 ✓ __tests__/ralph-state.test.ts (9 tests) 69ms
 ✓ __tests__/MetricsPanel.test.tsx (3 tests) 43ms
 ❯ __tests__/use-dashboard-state.test.tsx (3 tests | 1 failed) 40ms
     × uses the path query parameter when a project path is provided 22ms
     ✓ polls for new state every 2 seconds 10ms
     ✓ keeps previous data while background polling request is in flight 6ms
 ✓ __tests__/api-state.test.ts (7 tests) 83ms
 ✓ __tests__/ProgressPanel.test.tsx (2 tests) 106ms
 ✓ __tests__/ActivityLog.test.tsx (4 tests) 147ms
 ✓ __tests__/GitPanel.test.tsx (2 tests) 144ms
 ✓ __tests__/KanbanBoard.test.tsx (3 tests) 180ms
 ✓ __tests__/code-metrics.test.ts (3 tests) 10ms

thinking
**Planning poll session**
file update:
diff --git a/__tests__/api-state.test.ts b/__tests__/api-state.test.ts
index 9e10c2f6547b2d5905d4f16f802691b378db72b1..6ed7f6ec26f62ca7a22228e0a231c4430a0b21b9
--- a/__tests__/api-state.test.ts
+++ b/__tests__/api-state.test.ts
@@ -92,6 +92,18 @@
     expect(body).toHaveProperty("coverage");
   });
 
+  it("returns combined state using path query parameter alias", async () => {
+    const projectDir = await makeProjectFixture();
+    const url = new URL("http://localhost/api/state");
+    url.searchParams.set("path", projectDir);
+
+    const response = await stateGET(new Request(url));
+    const body = (await response.json()) as Record<string, unknown>;
+
+    expect(response.status).toBe(200);
+    expect(body.projectPath).toBe(projectDir);
+  });
+
   it("uses RALPH_PROJECT_PATH when query param is not provided", async () => {
     const projectDir = await makeProjectFixture();
     process.env.RALPH_PROJECT_PATH = projectDir;
diff --git a/__tests__/use-dashboard-state.test.tsx b/__tests__/use-dashboard-state.test.tsx
index 6bc0b0162b387ff638e51d5784db78a4b3b947f1..6e5a04a627d06470163ec1b1a82906e62afbd4e8
--- a/__tests__/use-dashboard-state.test.tsx
+++ b/__tests__/use-dashboard-state.test.tsx
@@ -104,6 +104,17 @@
 });
 
 describe("useDashboardState", () => {
+  it("uses the path query parameter when a project path is provided", async () => {
+    const fetchMock = vi.fn<typeof fetch>().mockResolvedValueOnce(makeSuccessResponse(basePayload));
+    vi.stubGlobal("fetch", fetchMock);
+
+    renderHook(() => useDashboardState("/tmp/with-space project"), { wrapper: makeWrapper() });
+    await flushReactQuery();
+
+    expect(fetchMock).toHaveBeenCalledTimes(1);
+    expect(fetchMock.mock.calls[0]?.[0]).toBe("/api/state?path=%2Ftmp%2Fwith-space+project");
+  });
+
   it("polls for new state every 2 seconds", async () => {
     vi.useFakeTimers();
 
diff --git a/components/LiveDashboard.tsx b/components/LiveDashboard.tsx
index 77bdd334cc2dc47f4f2955d848ec0a8cdc8c6ce1..9e85b84156b99b8816d75a33668902c3cb852a80
--- a/components/LiveDashboard.tsx
+++ b/components/LiveDashboard.tsx
@@ -1,6 +1,7 @@
 "use client";
 
 import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
+import { useSearchParams } from "next/navigation";
 import React, { useEffect, useMemo, useState } from "react";
 
 import ActivityLog from "@/components/ActivityLog";
@@ -11,7 +12,33 @@
 import { useDashboardState } from "@/hooks/use-dashboard-state";
 
 const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";
+const PROJECT_PATH_STORAGE_KEY = "ralph-dashboard:last-project-path";
+
+function normalizeProjectPath(value: string | null | undefined): string | null {
+  if (!value) {
+    return null;
+  }
+
+  const trimmed = value.trim();
+  return trimmed.length > 0 ? trimmed : null;
+}
 
+function readStoredProjectPath(): string | null {
+  if (typeof window === "undefined") {
+    return null;
+  }
+
+  return normalizeProjectPath(window.localStorage.getItem(PROJECT_PATH_STORAGE_KEY));
+}
+
+function persistProjectPath(projectPath: string): void {
+  if (typeof window === "undefined") {
+    return;
+  }
+
+  window.localStorage.setItem(PROJECT_PATH_STORAGE_KEY, projectPath);
+}
+
 function formatLastUpdated(isoTimestamp: string | undefined): string {
   if (!isoTimestamp) {
     return "Never";
@@ -26,10 +53,29 @@
 }
 
 function DashboardBody() {
-  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState();
+  const searchParams = useSearchParams();
+  const urlProjectPath = normalizeProjectPath(searchParams.get("path"));
+  const [selectedProjectPath, setSelectedProjectPath] = useState<string | undefined>(urlProjectPath ?? undefined);
+  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState(selectedProjectPath);
   const [showUpdated, setShowUpdated] = useState(false);
 
   useEffect(() => {
+    if (urlProjectPath) {
+      setSelectedProjectPath(urlProjectPath);
+      persistProjectPath(urlProjectPath);
+      return;
+    }
+
+    const storedPath = readStoredProjectPath();
+    if (storedPath) {
+      setSelectedProjectPath(storedPath);
+      return;
+    }
+
+    setSelectedProjectPath(undefined);
+  }, [urlProjectPath]);
+
+  useEffect(() => {
     if (!dataUpdatedAt) {
       return;
     }
@@ -39,12 +85,34 @@
     return () => window.clearTimeout(timeout);
   }, [dataUpdatedAt]);
 
+  useEffect(() => {
+    const resolvedProjectPath = normalizeProjectPath(data?.projectPath);
+    if (!resolvedProjectPath) {
+      return;
+    }
+
+    persistProjectPath(resolvedProjectPath);
+  }, [data?.projectPath]);
+
+  const currentProjectPath = data?.projectPath ?? selectedProjectPath ?? "Not configured";
+
+  const header = (
+    <header className="rounded-lg border border-border bg-card px-4 py-3 text-card-foreground md:px-5">
+      <h2 className="text-lg font-semibold tracking-tight">Run Overview</h2>
+      <p className="mt-1 text-sm text-muted-foreground">
+        Project path: <code className="text-foreground">{currentProjectPath}</code>
+      </p>
+    </header>
+  );
+
   if (isPending && !data) {
     return (
-      <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
-        <h2 className="text-lg font-medium">Run Overview</h2>
-        <p className="mt-2 text-sm text-muted-foreground">Loading live run state...</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
+          <p className="text-sm text-muted-foreground">Loading live run state...</p>
+        </section>
+      </div>
     );
   }
 
@@ -52,10 +120,12 @@
     const message = error instanceof Error ? error.message : DEFAULT_ERROR_MESSAGE;
 
     return (
-      <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
-        <h2 className="text-lg font-semibold">Run Overview</h2>
-        <p className="mt-2 text-sm text-red-200">{message}</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
+          <p className="text-sm text-red-200">{message}</p>
+        </section>
+      </div>
     );
   }
 
@@ -64,6 +134,7 @@
 
   return (
     <div className="space-y-6">
+      {header}
       <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-5">
         <div className="flex flex-wrap items-center justify-between gap-2 text-sm">
           <div className="flex items-center gap-2">
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();


thinking
**Adding fake timers to test**
codex
One new test failed because it reused a helper that advances fake timers. I’ll adjust that test to enable fake timers before rendering, then rerun the suite.
file update
M /Users/mcbee/Projects/agent-dashboard/__tests__/use-dashboard-state.test.tsx
@@ -107,2 +107,4 @@
   it("uses the path query parameter when a project path is provided", async () => {
+    vi.useFakeTimers();
+
     const fetchMock = vi.fn<typeof fetch>().mockResolvedValueOnce(makeSuccessResponse(basePayload));
apply_patch(auto_approved=true) exited 0 in 70ms:
Success. Updated the following files:
M __tests__/use-dashboard-state.test.tsx
file update:
diff --git a/__tests__/api-state.test.ts b/__tests__/api-state.test.ts
index 9e10c2f6547b2d5905d4f16f802691b378db72b1..6ed7f6ec26f62ca7a22228e0a231c4430a0b21b9
--- a/__tests__/api-state.test.ts
+++ b/__tests__/api-state.test.ts
@@ -92,6 +92,18 @@
     expect(body).toHaveProperty("coverage");
   });
 
+  it("returns combined state using path query parameter alias", async () => {
+    const projectDir = await makeProjectFixture();
+    const url = new URL("http://localhost/api/state");
+    url.searchParams.set("path", projectDir);
+
+    const response = await stateGET(new Request(url));
+    const body = (await response.json()) as Record<string, unknown>;
+
+    expect(response.status).toBe(200);
+    expect(body.projectPath).toBe(projectDir);
+  });
+
   it("uses RALPH_PROJECT_PATH when query param is not provided", async () => {
     const projectDir = await makeProjectFixture();
     process.env.RALPH_PROJECT_PATH = projectDir;
diff --git a/__tests__/use-dashboard-state.test.tsx b/__tests__/use-dashboard-state.test.tsx
index 6bc0b0162b387ff638e51d5784db78a4b3b947f1..4c000298b063722bf2d0994253e7bcc2b81a74c2
--- a/__tests__/use-dashboard-state.test.tsx
+++ b/__tests__/use-dashboard-state.test.tsx
@@ -104,6 +104,19 @@
 });
 
 describe("useDashboardState", () => {
+  it("uses the path query parameter when a project path is provided", async () => {
+    vi.useFakeTimers();
+
+    const fetchMock = vi.fn<typeof fetch>().mockResolvedValueOnce(makeSuccessResponse(basePayload));
+    vi.stubGlobal("fetch", fetchMock);
+
+    renderHook(() => useDashboardState("/tmp/with-space project"), { wrapper: makeWrapper() });
+    await flushReactQuery();
+
+    expect(fetchMock).toHaveBeenCalledTimes(1);
+    expect(fetchMock.mock.calls[0]?.[0]).toBe("/api/state?path=%2Ftmp%2Fwith-space+project");
+  });
+
   it("polls for new state every 2 seconds", async () => {
     vi.useFakeTimers();
 
diff --git a/components/LiveDashboard.tsx b/components/LiveDashboard.tsx
index 77bdd334cc2dc47f4f2955d848ec0a8cdc8c6ce1..9e85b84156b99b8816d75a33668902c3cb852a80
--- a/components/LiveDashboard.tsx
+++ b/components/LiveDashboard.tsx
@@ -1,6 +1,7 @@
 "use client";
 
 import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
+import { useSearchParams } from "next/navigation";
 import React, { useEffect, useMemo, useState } from "react";
 
 import ActivityLog from "@/components/ActivityLog";
@@ -11,7 +12,33 @@
 import { useDashboardState } from "@/hooks/use-dashboard-state";
 
 const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";
+const PROJECT_PATH_STORAGE_KEY = "ralph-dashboard:last-project-path";
+
+function normalizeProjectPath(value: string | null | undefined): string | null {
+  if (!value) {
+    return null;
+  }
+
+  const trimmed = value.trim();
+  return trimmed.length > 0 ? trimmed : null;
+}
 
+function readStoredProjectPath(): string | null {
+  if (typeof window === "undefined") {
+    return null;
+  }
+
+  return normalizeProjectPath(window.localStorage.getItem(PROJECT_PATH_STORAGE_KEY));
+}
+
+function persistProjectPath(projectPath: string): void {
+  if (typeof window === "undefined") {
+    return;
+  }
+
+  window.localStorage.setItem(PROJECT_PATH_STORAGE_KEY, projectPath);
+}
+
 function formatLastUpdated(isoTimestamp: string | undefined): string {
   if (!isoTimestamp) {
     return "Never";
@@ -26,10 +53,29 @@
 }
 
 function DashboardBody() {
-  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState();
+  const searchParams = useSearchParams();
+  const urlProjectPath = normalizeProjectPath(searchParams.get("path"));
+  const [selectedProjectPath, setSelectedProjectPath] = useState<string | undefined>(urlProjectPath ?? undefined);
+  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState(selectedProjectPath);
   const [showUpdated, setShowUpdated] = useState(false);
 
   useEffect(() => {
+    if (urlProjectPath) {
+      setSelectedProjectPath(urlProjectPath);
+      persistProjectPath(urlProjectPath);
+      return;
+    }
+
+    const storedPath = readStoredProjectPath();
+    if (storedPath) {
+      setSelectedProjectPath(storedPath);
+      return;
+    }
+
+    setSelectedProjectPath(undefined);
+  }, [urlProjectPath]);
+
+  useEffect(() => {
     if (!dataUpdatedAt) {
       return;
     }
@@ -39,12 +85,34 @@
     return () => window.clearTimeout(timeout);
   }, [dataUpdatedAt]);
 
+  useEffect(() => {
+    const resolvedProjectPath = normalizeProjectPath(data?.projectPath);
+    if (!resolvedProjectPath) {
+      return;
+    }
+
+    persistProjectPath(resolvedProjectPath);
+  }, [data?.projectPath]);
+
+  const currentProjectPath = data?.projectPath ?? selectedProjectPath ?? "Not configured";
+
+  const header = (
+    <header className="rounded-lg border border-border bg-card px-4 py-3 text-card-foreground md:px-5">
+      <h2 className="text-lg font-semibold tracking-tight">Run Overview</h2>
+      <p className="mt-1 text-sm text-muted-foreground">
+        Project path: <code className="text-foreground">{currentProjectPath}</code>
+      </p>
+    </header>
+  );
+
   if (isPending && !data) {
     return (
-      <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
-        <h2 className="text-lg font-medium">Run Overview</h2>
-        <p className="mt-2 text-sm text-muted-foreground">Loading live run state...</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
+          <p className="text-sm text-muted-foreground">Loading live run state...</p>
+        </section>
+      </div>
     );
   }
 
@@ -52,10 +120,12 @@
     const message = error instanceof Error ? error.message : DEFAULT_ERROR_MESSAGE;
 
     return (
-      <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
-        <h2 className="text-lg font-semibold">Run Overview</h2>
-        <p className="mt-2 text-sm text-red-200">{message}</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
+          <p className="text-sm text-red-200">{message}</p>
+        </section>
+      </div>
     );
   }
 
@@ -64,6 +134,7 @@
 
   return (
     <div className="space-y-6">
+      {header}
       <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-5">
         <div className="flex flex-wrap items-center justify-between gap-2 text-sm">
           <div className="flex items-center gap-2">
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();

file update:
diff --git a/__tests__/api-state.test.ts b/__tests__/api-state.test.ts
index 9e10c2f6547b2d5905d4f16f802691b378db72b1..6ed7f6ec26f62ca7a22228e0a231c4430a0b21b9
--- a/__tests__/api-state.test.ts
+++ b/__tests__/api-state.test.ts
@@ -92,6 +92,18 @@
     expect(body).toHaveProperty("coverage");
   });
 
+  it("returns combined state using path query parameter alias", async () => {
+    const projectDir = await makeProjectFixture();
+    const url = new URL("http://localhost/api/state");
+    url.searchParams.set("path", projectDir);
+
+    const response = await stateGET(new Request(url));
+    const body = (await response.json()) as Record<string, unknown>;
+
+    expect(response.status).toBe(200);
+    expect(body.projectPath).toBe(projectDir);
+  });
+
   it("uses RALPH_PROJECT_PATH when query param is not provided", async () => {
     const projectDir = await makeProjectFixture();
     process.env.RALPH_PROJECT_PATH = projectDir;
diff --git a/__tests__/use-dashboard-state.test.tsx b/__tests__/use-dashboard-state.test.tsx
index 6bc0b0162b387ff638e51d5784db78a4b3b947f1..4c000298b063722bf2d0994253e7bcc2b81a74c2
--- a/__tests__/use-dashboard-state.test.tsx
+++ b/__tests__/use-dashboard-state.test.tsx
@@ -104,6 +104,19 @@
 });
 
 describe("useDashboardState", () => {
+  it("uses the path query parameter when a project path is provided", async () => {
+    vi.useFakeTimers();
+
+    const fetchMock = vi.fn<typeof fetch>().mockResolvedValueOnce(makeSuccessResponse(basePayload));
+    vi.stubGlobal("fetch", fetchMock);
+
+    renderHook(() => useDashboardState("/tmp/with-space project"), { wrapper: makeWrapper() });
+    await flushReactQuery();
+
+    expect(fetchMock).toHaveBeenCalledTimes(1);
+    expect(fetchMock.mock.calls[0]?.[0]).toBe("/api/state?path=%2Ftmp%2Fwith-space+project");
+  });
+
   it("polls for new state every 2 seconds", async () => {
     vi.useFakeTimers();
 
diff --git a/components/LiveDashboard.tsx b/components/LiveDashboard.tsx
index 77bdd334cc2dc47f4f2955d848ec0a8cdc8c6ce1..9e85b84156b99b8816d75a33668902c3cb852a80
--- a/components/LiveDashboard.tsx
+++ b/components/LiveDashboard.tsx
@@ -1,6 +1,7 @@
 "use client";
 
 import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
+import { useSearchParams } from "next/navigation";
 import React, { useEffect, useMemo, useState } from "react";
 
 import ActivityLog from "@/components/ActivityLog";
@@ -11,7 +12,33 @@
 import { useDashboardState } from "@/hooks/use-dashboard-state";
 
 const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";
+const PROJECT_PATH_STORAGE_KEY = "ralph-dashboard:last-project-path";
+
+function normalizeProjectPath(value: string | null | undefined): string | null {
+  if (!value) {
+    return null;
+  }
+
+  const trimmed = value.trim();
+  return trimmed.length > 0 ? trimmed : null;
+}
 
+function readStoredProjectPath(): string | null {
+  if (typeof window === "undefined") {
+    return null;
+  }
+
+  return normalizeProjectPath(window.localStorage.getItem(PROJECT_PATH_STORAGE_KEY));
+}
+
+function persistProjectPath(projectPath: string): void {
+  if (typeof window === "undefined") {
+    return;
+  }
+
+  window.localStorage.setItem(PROJECT_PATH_STORAGE_KEY, projectPath);
+}
+
 function formatLastUpdated(isoTimestamp: string | undefined): string {
   if (!isoTimestamp) {
     return "Never";
@@ -26,10 +53,29 @@
 }
 
 function DashboardBody() {
-  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState();
+  const searchParams = useSearchParams();
+  const urlProjectPath = normalizeProjectPath(searchParams.get("path"));
+  const [selectedProjectPath, setSelectedProjectPath] = useState<string | undefined>(urlProjectPath ?? undefined);
+  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState(selectedProjectPath);
   const [showUpdated, setShowUpdated] = useState(false);
 
   useEffect(() => {
+    if (urlProjectPath) {
+      setSelectedProjectPath(urlProjectPath);
+      persistProjectPath(urlProjectPath);
+      return;
+    }
+
+    const storedPath = readStoredProjectPath();
+    if (storedPath) {
+      setSelectedProjectPath(storedPath);
+      return;
+    }
+
+    setSelectedProjectPath(undefined);
+  }, [urlProjectPath]);
+
+  useEffect(() => {
     if (!dataUpdatedAt) {
       return;
     }
@@ -39,12 +85,34 @@
     return () => window.clearTimeout(timeout);
   }, [dataUpdatedAt]);
 
+  useEffect(() => {
+    const resolvedProjectPath = normalizeProjectPath(data?.projectPath);
+    if (!resolvedProjectPath) {
+      return;
+    }
+
+    persistProjectPath(resolvedProjectPath);
+  }, [data?.projectPath]);
+
+  const currentProjectPath = data?.projectPath ?? selectedProjectPath ?? "Not configured";
+
+  const header = (
+    <header className="rounded-lg border border-border bg-card px-4 py-3 text-card-foreground md:px-5">
+      <h2 className="text-lg font-semibold tracking-tight">Run Overview</h2>
+      <p className="mt-1 text-sm text-muted-foreground">
+        Project path: <code className="text-foreground">{currentProjectPath}</code>
+      </p>
+    </header>
+  );
+
   if (isPending && !data) {
     return (
-      <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
-        <h2 className="text-lg font-medium">Run Overview</h2>
-        <p className="mt-2 text-sm text-muted-foreground">Loading live run state...</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
+          <p className="text-sm text-muted-foreground">Loading live run state...</p>
+        </section>
+      </div>
     );
   }
 
@@ -52,10 +120,12 @@
     const message = error instanceof Error ? error.message : DEFAULT_ERROR_MESSAGE;
 
     return (
-      <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
-        <h2 className="text-lg font-semibold">Run Overview</h2>
-        <p className="mt-2 text-sm text-red-200">{message}</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
+          <p className="text-sm text-red-200">{message}</p>
+        </section>
+      </div>
     );
   }
 
@@ -64,6 +134,7 @@
 
   return (
     <div className="space-y-6">
+      {header}
       <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-5">
         <div className="flex flex-wrap items-center justify-between gap-2 text-sm">
           <div className="flex items-center gap-2">
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();


thinking
**Rerunning tests**
codex
Rerunning tests to confirm everything passes after the timer fix.
exec
/bin/zsh -lc 'npm test' in /Users/mcbee/Projects/agent-dashboardfile update:
diff --git a/__tests__/api-state.test.ts b/__tests__/api-state.test.ts
index 9e10c2f6547b2d5905d4f16f802691b378db72b1..6ed7f6ec26f62ca7a22228e0a231c4430a0b21b9
--- a/__tests__/api-state.test.ts
+++ b/__tests__/api-state.test.ts
@@ -92,6 +92,18 @@
     expect(body).toHaveProperty("coverage");
   });
 
+  it("returns combined state using path query parameter alias", async () => {
+    const projectDir = await makeProjectFixture();
+    const url = new URL("http://localhost/api/state");
+    url.searchParams.set("path", projectDir);
+
+    const response = await stateGET(new Request(url));
+    const body = (await response.json()) as Record<string, unknown>;
+
+    expect(response.status).toBe(200);
+    expect(body.projectPath).toBe(projectDir);
+  });
+
   it("uses RALPH_PROJECT_PATH when query param is not provided", async () => {
     const projectDir = await makeProjectFixture();
     process.env.RALPH_PROJECT_PATH = projectDir;
diff --git a/__tests__/use-dashboard-state.test.tsx b/__tests__/use-dashboard-state.test.tsx
index 6bc0b0162b387ff638e51d5784db78a4b3b947f1..4c000298b063722bf2d0994253e7bcc2b81a74c2
--- a/__tests__/use-dashboard-state.test.tsx
+++ b/__tests__/use-dashboard-state.test.tsx
@@ -104,6 +104,19 @@
 });
 
 describe("useDashboardState", () => {
+  it("uses the path query parameter when a project path is provided", async () => {
+    vi.useFakeTimers();
+
+    const fetchMock = vi.fn<typeof fetch>().mockResolvedValueOnce(makeSuccessResponse(basePayload));
+    vi.stubGlobal("fetch", fetchMock);
+
+    renderHook(() => useDashboardState("/tmp/with-space project"), { wrapper: makeWrapper() });
+    await flushReactQuery();
+
+    expect(fetchMock).toHaveBeenCalledTimes(1);
+    expect(fetchMock.mock.calls[0]?.[0]).toBe("/api/state?path=%2Ftmp%2Fwith-space+project");
+  });
+
   it("polls for new state every 2 seconds", async () => {
     vi.useFakeTimers();
 
diff --git a/components/LiveDashboard.tsx b/components/LiveDashboard.tsx
index 77bdd334cc2dc47f4f2955d848ec0a8cdc8c6ce1..9e85b84156b99b8816d75a33668902c3cb852a80
--- a/components/LiveDashboard.tsx
+++ b/components/LiveDashboard.tsx
@@ -1,6 +1,7 @@
 "use client";
 
 import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
+import { useSearchParams } from "next/navigation";
 import React, { useEffect, useMemo, useState } from "react";
 
 import ActivityLog from "@/components/ActivityLog";
@@ -11,7 +12,33 @@
 import { useDashboardState } from "@/hooks/use-dashboard-state";
 
 const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";
+const PROJECT_PATH_STORAGE_KEY = "ralph-dashboard:last-project-path";
+
+function normalizeProjectPath(value: string | null | undefined): string | null {
+  if (!value) {
+    return null;
+  }
+
+  const trimmed = value.trim();
+  return trimmed.length > 0 ? trimmed : null;
+}
 
+function readStoredProjectPath(): string | null {
+  if (typeof window === "undefined") {
+    return null;
+  }
+
+  return normalizeProjectPath(window.localStorage.getItem(PROJECT_PATH_STORAGE_KEY));
+}
+
+function persistProjectPath(projectPath: string): void {
+  if (typeof window === "undefined") {
+    return;
+  }
+
+  window.localStorage.setItem(PROJECT_PATH_STORAGE_KEY, projectPath);
+}
+
 function formatLastUpdated(isoTimestamp: string | undefined): string {
   if (!isoTimestamp) {
     return "Never";
@@ -26,10 +53,29 @@
 }
 
 function DashboardBody() {
-  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState();
+  const searchParams = useSearchParams();
+  const urlProjectPath = normalizeProjectPath(searchParams.get("path"));
+  const [selectedProjectPath, setSelectedProjectPath] = useState<string | undefined>(urlProjectPath ?? undefined);
+  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState(selectedProjectPath);
   const [showUpdated, setShowUpdated] = useState(false);
 
   useEffect(() => {
+    if (urlProjectPath) {
+      setSelectedProjectPath(urlProjectPath);
+      persistProjectPath(urlProjectPath);
+      return;
+    }
+
+    const storedPath = readStoredProjectPath();
+    if (storedPath) {
+      setSelectedProjectPath(storedPath);
+      return;
+    }
+
+    setSelectedProjectPath(undefined);
+  }, [urlProjectPath]);
+
+  useEffect(() => {
     if (!dataUpdatedAt) {
       return;
     }
@@ -39,12 +85,34 @@
     return () => window.clearTimeout(timeout);
   }, [dataUpdatedAt]);
 
+  useEffect(() => {
+    const resolvedProjectPath = normalizeProjectPath(data?.projectPath);
+    if (!resolvedProjectPath) {
+      return;
+    }
+
+    persistProjectPath(resolvedProjectPath);
+  }, [data?.projectPath]);
+
+  const currentProjectPath = data?.projectPath ?? selectedProjectPath ?? "Not configured";
+
+  const header = (
+    <header className="rounded-lg border border-border bg-card px-4 py-3 text-card-foreground md:px-5">
+      <h2 className="text-lg font-semibold tracking-tight">Run Overview</h2>
+      <p className="mt-1 text-sm text-muted-foreground">
+        Project path: <code className="text-foreground">{currentProjectPath}</code>
+      </p>
+    </header>
+  );
+
   if (isPending && !data) {
     return (
-      <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
-        <h2 className="text-lg font-medium">Run Overview</h2>
-        <p className="mt-2 text-sm text-muted-foreground">Loading live run state...</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
+          <p className="text-sm text-muted-foreground">Loading live run state...</p>
+        </section>
+      </div>
     );
   }
 
@@ -52,10 +120,12 @@
     const message = error instanceof Error ? error.message : DEFAULT_ERROR_MESSAGE;
 
     return (
-      <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
-        <h2 className="text-lg font-semibold">Run Overview</h2>
-        <p className="mt-2 text-sm text-red-200">{message}</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
+          <p className="text-sm text-red-200">{message}</p>
+        </section>
+      </div>
     );
   }
 
@@ -64,6 +134,7 @@
 
   return (
     <div className="space-y-6">
+      {header}
       <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-5">
         <div className="flex flex-wrap items-center justify-between gap-2 text-sm">
           <div className="flex items-center gap-2">
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();

 succeeded in 1.61s:

> ralph-dashboard@0.1.0 test
> vitest run


 RUN  v4.0.18 /Users/mcbee/Projects/agent-dashboard

 ✓ __tests__/ralph-state.test.ts (9 tests) 23ms
 ✓ __tests__/coverage-reader.test.ts (7 tests) 21ms
 ✓ __tests__/use-dashboard-state.test.tsx (3 tests) 36ms
 ✓ __tests__/api-state.test.ts (7 tests) 80ms
 ✓ __tests__/MetricsPanel.test.tsx (3 tests) 64ms
 ✓ __tests__/GitPanel.test.tsx (2 tests) 130ms
 ✓ __tests__/ProgressPanel.test.tsx (2 tests) 103ms
 ✓ __tests__/ActivityLog.test.tsx (4 tests) 150ms
 ✓ __tests__/KanbanBoard.test.tsx (3 tests) 160ms
 ✓ __tests__/code-metrics.test.ts (3 tests) 7ms
 ✓ __tests__/git-state.test.ts (5 tests) 3ms
 ✓ __tests__/example.test.ts (1 test) 8ms

file update:
diff --git a/__tests__/api-state.test.ts b/__tests__/api-state.test.ts
index 9e10c2f6547b2d5905d4f16f802691b378db72b1..6ed7f6ec26f62ca7a22228e0a231c4430a0b21b9
--- a/__tests__/api-state.test.ts
+++ b/__tests__/api-state.test.ts
@@ -92,6 +92,18 @@
     expect(body).toHaveProperty("coverage");
   });
 
+  it("returns combined state using path query parameter alias", async () => {
+    const projectDir = await makeProjectFixture();
+    const url = new URL("http://localhost/api/state");
+    url.searchParams.set("path", projectDir);
+
+    const response = await stateGET(new Request(url));
+    const body = (await response.json()) as Record<string, unknown>;
+
+    expect(response.status).toBe(200);
+    expect(body.projectPath).toBe(projectDir);
+  });
+
   it("uses RALPH_PROJECT_PATH when query param is not provided", async () => {
     const projectDir = await makeProjectFixture();
     process.env.RALPH_PROJECT_PATH = projectDir;
diff --git a/__tests__/use-dashboard-state.test.tsx b/__tests__/use-dashboard-state.test.tsx
index 6bc0b0162b387ff638e51d5784db78a4b3b947f1..4c000298b063722bf2d0994253e7bcc2b81a74c2
--- a/__tests__/use-dashboard-state.test.tsx
+++ b/__tests__/use-dashboard-state.test.tsx
@@ -104,6 +104,19 @@
 });
 
 describe("useDashboardState", () => {
+  it("uses the path query parameter when a project path is provided", async () => {
+    vi.useFakeTimers();
+
+    const fetchMock = vi.fn<typeof fetch>().mockResolvedValueOnce(makeSuccessResponse(basePayload));
+    vi.stubGlobal("fetch", fetchMock);
+
+    renderHook(() => useDashboardState("/tmp/with-space project"), { wrapper: makeWrapper() });
+    await flushReactQuery();
+
+    expect(fetchMock).toHaveBeenCalledTimes(1);
+    expect(fetchMock.mock.calls[0]?.[0]).toBe("/api/state?path=%2Ftmp%2Fwith-space+project");
+  });
+
   it("polls for new state every 2 seconds", async () => {
     vi.useFakeTimers();
 
diff --git a/components/LiveDashboard.tsx b/components/LiveDashboard.tsx
index 77bdd334cc2dc47f4f2955d848ec0a8cdc8c6ce1..9e85b84156b99b8816d75a33668902c3cb852a80
--- a/components/LiveDashboard.tsx
+++ b/components/LiveDashboard.tsx
@@ -1,6 +1,7 @@
 "use client";
 
 import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
+import { useSearchParams } from "next/navigation";
 import React, { useEffect, useMemo, useState } from "react";
 
 import ActivityLog from "@/components/ActivityLog";
@@ -11,7 +12,33 @@
 import { useDashboardState } from "@/hooks/use-dashboard-state";
 
 const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";
+const PROJECT_PATH_STORAGE_KEY = "ralph-dashboard:last-project-path";
+
+function normalizeProjectPath(value: string | null | undefined): string | null {
+  if (!value) {
+    return null;
+  }
+
+  const trimmed = value.trim();
+  return trimmed.length > 0 ? trimmed : null;
+}
 
+function readStoredProjectPath(): string | null {
+  if (typeof window === "undefined") {
+    return null;
+  }
+
+  return normalizeProjectPath(window.localStorage.getItem(PROJECT_PATH_STORAGE_KEY));
+}
+
+function persistProjectPath(projectPath: string): void {
+  if (typeof window === "undefined") {
+    return;
+  }
+
+  window.localStorage.setItem(PROJECT_PATH_STORAGE_KEY, projectPath);
+}
+
 function formatLastUpdated(isoTimestamp: string | undefined): string {
   if (!isoTimestamp) {
     return "Never";
@@ -26,10 +53,29 @@
 }
 
 function DashboardBody() {
-  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState();
+  const searchParams = useSearchParams();
+  const urlProjectPath = normalizeProjectPath(searchParams.get("path"));
+  const [selectedProjectPath, setSelectedProjectPath] = useState<string | undefined>(urlProjectPath ?? undefined);
+  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState(selectedProjectPath);
   const [showUpdated, setShowUpdated] = useState(false);
 
   useEffect(() => {
+    if (urlProjectPath) {
+      setSelectedProjectPath(urlProjectPath);
+      persistProjectPath(urlProjectPath);
+      return;
+    }
+
+    const storedPath = readStoredProjectPath();
+    if (storedPath) {
+      setSelectedProjectPath(storedPath);
+      return;
+    }
+
+    setSelectedProjectPath(undefined);
+  }, [urlProjectPath]);
+
+  useEffect(() => {
     if (!dataUpdatedAt) {
       return;
     }
@@ -39,12 +85,34 @@
     return () => window.clearTimeout(timeout);
   }, [dataUpdatedAt]);
 
+  useEffect(() => {
+    const resolvedProjectPath = normalizeProjectPath(data?.projectPath);
+    if (!resolvedProjectPath) {
+      return;
+    }
+
+    persistProjectPath(resolvedProjectPath);
+  }, [data?.projectPath]);
+
+  const currentProjectPath = data?.projectPath ?? selectedProjectPath ?? "Not configured";
+
+  const header = (
+    <header className="rounded-lg border border-border bg-card px-4 py-3 text-card-foreground md:px-5">
+      <h2 className="text-lg font-semibold tracking-tight">Run Overview</h2>
+      <p className="mt-1 text-sm text-muted-foreground">
+        Project path: <code className="text-foreground">{currentProjectPath}</code>
+      </p>
+    </header>
+  );
+
   if (isPending && !data) {
     return (
-      <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
-        <h2 className="text-lg font-medium">Run Overview</h2>
-        <p className="mt-2 text-sm text-muted-foreground">Loading live run state...</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
+          <p className="text-sm text-muted-foreground">Loading live run state...</p>
+        </section>
+      </div>
     );
   }
 
@@ -52,10 +120,12 @@
     const message = error instanceof Error ? error.message : DEFAULT_ERROR_MESSAGE;
 
     return (
-      <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
-        <h2 className="text-lg font-semibold">Run Overview</h2>
-        <p className="mt-2 text-sm text-red-200">{message}</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
+          <p className="text-sm text-red-200">{message}</p>
+        </section>
+      </div>
     );
   }
 
@@ -64,6 +134,7 @@
 
   return (
     <div className="space-y-6">
+      {header}
       <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-5">
         <div className="flex flex-wrap items-center justify-between gap-2 text-sm">
           <div className="flex items-center gap-2">
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();


thinking
**Considering verification approach**
codex
All tests are now green. I’m doing a quick diff review to verify the implementation exactly matches the item’s 4 requirements and stays scoped.
exec
/bin/zsh -lc 'git status --short && git diff -- components/LiveDashboard.tsx hooks/use-dashboard-state.ts __tests__/api-state.test.ts __tests__/use-dashboard-state.test.tsx' in /Users/mcbee/Projects/agent-dashboard succeeded in 230ms:
 M .ralph/current.log
 M .ralph/state.json
 M __tests__/api-state.test.ts
 M __tests__/use-dashboard-state.test.tsx
 M components/LiveDashboard.tsx
 M hooks/use-dashboard-state.ts
 M prd-ralph-dashboard.json
diff --git a/__tests__/api-state.test.ts b/__tests__/api-state.test.ts
index 9e10c2f..6ed7f6e 100644
--- a/__tests__/api-state.test.ts
+++ b/__tests__/api-state.test.ts
@@ -92,6 +92,18 @@ describe("GET /api/state", () => {
     expect(body).toHaveProperty("coverage");
   });
 
+  it("returns combined state using path query parameter alias", async () => {
+    const projectDir = await makeProjectFixture();
+    const url = new URL("http://localhost/api/state");
+    url.searchParams.set("path", projectDir);
+
file update:
diff --git a/__tests__/api-state.test.ts b/__tests__/api-state.test.ts
index 9e10c2f6547b2d5905d4f16f802691b378db72b1..6ed7f6ec26f62ca7a22228e0a231c4430a0b21b9
--- a/__tests__/api-state.test.ts
+++ b/__tests__/api-state.test.ts
@@ -92,6 +92,18 @@
     expect(body).toHaveProperty("coverage");
   });
 
+  it("returns combined state using path query parameter alias", async () => {
+    const projectDir = await makeProjectFixture();
+    const url = new URL("http://localhost/api/state");
+    url.searchParams.set("path", projectDir);
+
+    const response = await stateGET(new Request(url));
+    const body = (await response.json()) as Record<string, unknown>;
+
+    expect(response.status).toBe(200);
+    expect(body.projectPath).toBe(projectDir);
+  });
+
   it("uses RALPH_PROJECT_PATH when query param is not provided", async () => {
     const projectDir = await makeProjectFixture();
     process.env.RALPH_PROJECT_PATH = projectDir;
diff --git a/__tests__/use-dashboard-state.test.tsx b/__tests__/use-dashboard-state.test.tsx
index 6bc0b0162b387ff638e51d5784db78a4b3b947f1..4c000298b063722bf2d0994253e7bcc2b81a74c2
--- a/__tests__/use-dashboard-state.test.tsx
+++ b/__tests__/use-dashboard-state.test.tsx
@@ -104,6 +104,19 @@
 });
 
 describe("useDashboardState", () => {
+  it("uses the path query parameter when a project path is provided", async () => {
+    vi.useFakeTimers();
+
+    const fetchMock = vi.fn<typeof fetch>().mockResolvedValueOnce(makeSuccessResponse(basePayload));
+    vi.stubGlobal("fetch", fetchMock);
+
+    renderHook(() => useDashboardState("/tmp/with-space project"), { wrapper: makeWrapper() });
+    await flushReactQuery();
+
+    expect(fetchMock).toHaveBeenCalledTimes(1);
+    expect(fetchMock.mock.calls[0]?.[0]).toBe("/api/state?path=%2Ftmp%2Fwith-space+project");
+  });
+
   it("polls for new state every 2 seconds", async () => {
     vi.useFakeTimers();
 
diff --git a/components/LiveDashboard.tsx b/components/LiveDashboard.tsx
index 77bdd334cc2dc47f4f2955d848ec0a8cdc8c6ce1..9e85b84156b99b8816d75a33668902c3cb852a80
--- a/components/LiveDashboard.tsx
+++ b/components/LiveDashboard.tsx
@@ -1,6 +1,7 @@
 "use client";
 
 import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
+import { useSearchParams } from "next/navigation";
 import React, { useEffect, useMemo, useState } from "react";
 
 import ActivityLog from "@/components/ActivityLog";
@@ -11,7 +12,33 @@
 import { useDashboardState } from "@/hooks/use-dashboard-state";
 
 const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";
+const PROJECT_PATH_STORAGE_KEY = "ralph-dashboard:last-project-path";
+
+function normalizeProjectPath(value: string | null | undefined): string | null {
+  if (!value) {
+    return null;
+  }
+
+  const trimmed = value.trim();
+  return trimmed.length > 0 ? trimmed : null;
+}
 
+function readStoredProjectPath(): string | null {
+  if (typeof window === "undefined") {
+    return null;
+  }
+
+  return normalizeProjectPath(window.localStorage.getItem(PROJECT_PATH_STORAGE_KEY));
+}
+
+function persistProjectPath(projectPath: string): void {
+  if (typeof window === "undefined") {
+    return;
+  }
+
+  window.localStorage.setItem(PROJECT_PATH_STORAGE_KEY, projectPath);
+}
+
 function formatLastUpdated(isoTimestamp: string | undefined): string {
   if (!isoTimestamp) {
     return "Never";
@@ -26,10 +53,29 @@
 }
 
 function DashboardBody() {
-  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState();
+  const searchParams = useSearchParams();
+  const urlProjectPath = normalizeProjectPath(searchParams.get("path"));
+  const [selectedProjectPath, setSelectedProjectPath] = useState<string | undefined>(urlProjectPath ?? undefined);
+  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState(selectedProjectPath);
   const [showUpdated, setShowUpdated] = useState(false);
 
   useEffect(() => {
+    if (urlProjectPath) {
+      setSelectedProjectPath(urlProjectPath);
+      persistProjectPath(urlProjectPath);
+      return;
+    }
+
+    const storedPath = readStoredProjectPath();
+    if (storedPath) {
+      setSelectedProjectPath(storedPath);
+      return;
+    }
+
+    setSelectedProjectPath(undefined);
+  }, [urlProjectPath]);
+
+  useEffect(() => {
     if (!dataUpdatedAt) {
       return;
     }
@@ -39,12 +85,34 @@
     return () => window.clearTimeout(timeout);
   }, [dataUpdatedAt]);
 
+  useEffect(() => {
+    const resolvedProjectPath = normalizeProjectPath(data?.projectPath);
+    if (!resolvedProjectPath) {
+      return;
+    }
+
+    persistProjectPath(resolvedProjectPath);
+  }, [data?.projectPath]);
+
+  const currentProjectPath = data?.projectPath ?? selectedProjectPath ?? "Not configured";
+
+  const header = (
+    <header className="rounded-lg border border-border bg-card px-4 py-3 text-card-foreground md:px-5">
+      <h2 className="text-lg font-semibold tracking-tight">Run Overview</h2>
+      <p className="mt-1 text-sm text-muted-foreground">
+        Project path: <code className="text-foreground">{currentProjectPath}</code>
+      </p>
+    </header>
+  );
+
   if (isPending && !data) {
     return (
-      <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
-        <h2 className="text-lg font-medium">Run Overview</h2>
-        <p className="mt-2 text-sm text-muted-foreground">Loading live run state...</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
+          <p className="text-sm text-muted-foreground">Loading live run state...</p>
+        </section>
+      </div>
     );
   }
 
@@ -52,10 +120,12 @@
     const message = error instanceof Error ? error.message : DEFAULT_ERROR_MESSAGE;
 
     return (
-      <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
-        <h2 className="text-lg font-semibold">Run Overview</h2>
-        <p className="mt-2 text-sm text-red-200">{message}</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
+          <p className="text-sm text-red-200">{message}</p>
+        </section>
+      </div>
     );
   }
 
@@ -64,6 +134,7 @@
 
   return (
     <div className="space-y-6">
+      {header}
       <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-5">
         <div className="flex flex-wrap items-center justify-between gap-2 text-sm">
           <div className="flex items-center gap-2">
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();


thinking
**Verifying scope and criteria compliance**
codex
Implemented item 15/17 with focused changes for project path configuration and persistence.

### What changed

1. `?path=` is now used end-to-end on the client
- Updated API request construction to send `path` instead of `projectPath`.
- File: `hooks/use-dashboard-state.ts`

2. URL `path` + localStorage project selection logic
- `LiveDashboard` now resolves project path in this order:
  - URL param `?path=...`
  - `localStorage` (`ralph-dashboard:last-project-path`)
  - fallback to server/env behavior (`/api/state` with no query)
- On successful data load, it persists the resolved path to localStorage.
- File: `components/LiveDashboard.tsx`

3. Current project path shown in the dashboard header
- Added a top header block in `LiveDashboard` that displays:
  - `Project path: <resolved path>` (or `Not configured` if missing)
- File: `components/LiveDashboard.tsx`

4. Tests for URL path behavior
- Added API coverage for `?path=` alias.
- Added hook test asserting client requests use `/api/state?path=...`.
- Files:
  - `__tests__/api-state.test.ts`
  - `__tests__/use-dashboard-state.test.tsx`

### Verification status

- `RALPH_PROJECT_PATH` env var: still supported server-side in `app/api/state/route.ts`.
- `?path=` URL parameter: supported server-side and now client-side.
- Current project path shown in header: implemented in `LiveDashboard`.
- Last selected project persisted in localStorage: implemented and restored on load.

### Test result

- Ran: `npm test`
- Result: all tests passing (`12` test files, `49` tests).
file update:
diff --git a/__tests__/api-state.test.ts b/__tests__/api-state.test.ts
index 9e10c2f6547b2d5905d4f16f802691b378db72b1..6ed7f6ec26f62ca7a22228e0a231c4430a0b21b9
--- a/__tests__/api-state.test.ts
+++ b/__tests__/api-state.test.ts
@@ -92,6 +92,18 @@
     expect(body).toHaveProperty("coverage");
   });
 
+  it("returns combined state using path query parameter alias", async () => {
+    const projectDir = await makeProjectFixture();
+    const url = new URL("http://localhost/api/state");
+    url.searchParams.set("path", projectDir);
+
+    const response = await stateGET(new Request(url));
+    const body = (await response.json()) as Record<string, unknown>;
+
+    expect(response.status).toBe(200);
+    expect(body.projectPath).toBe(projectDir);
+  });
+
   it("uses RALPH_PROJECT_PATH when query param is not provided", async () => {
     const projectDir = await makeProjectFixture();
     process.env.RALPH_PROJECT_PATH = projectDir;
diff --git a/__tests__/use-dashboard-state.test.tsx b/__tests__/use-dashboard-state.test.tsx
index 6bc0b0162b387ff638e51d5784db78a4b3b947f1..4c000298b063722bf2d0994253e7bcc2b81a74c2
--- a/__tests__/use-dashboard-state.test.tsx
+++ b/__tests__/use-dashboard-state.test.tsx
@@ -104,6 +104,19 @@
 });
 
 describe("useDashboardState", () => {
+  it("uses the path query parameter when a project path is provided", async () => {
+    vi.useFakeTimers();
+
+    const fetchMock = vi.fn<typeof fetch>().mockResolvedValueOnce(makeSuccessResponse(basePayload));
+    vi.stubGlobal("fetch", fetchMock);
+
+    renderHook(() => useDashboardState("/tmp/with-space project"), { wrapper: makeWrapper() });
+    await flushReactQuery();
+
+    expect(fetchMock).toHaveBeenCalledTimes(1);
+    expect(fetchMock.mock.calls[0]?.[0]).toBe("/api/state?path=%2Ftmp%2Fwith-space+project");
+  });
+
   it("polls for new state every 2 seconds", async () => {
     vi.useFakeTimers();
 
diff --git a/components/LiveDashboard.tsx b/components/LiveDashboard.tsx
index 77bdd334cc2dc47f4f2955d848ec0a8cdc8c6ce1..9e85b84156b99b8816d75a33668902c3cb852a80
--- a/components/LiveDashboard.tsx
+++ b/components/LiveDashboard.tsx
@@ -1,6 +1,7 @@
 "use client";
 
 import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
+import { useSearchParams } from "next/navigation";
 import React, { useEffect, useMemo, useState } from "react";
 
 import ActivityLog from "@/components/ActivityLog";
@@ -11,7 +12,33 @@
 import { useDashboardState } from "@/hooks/use-dashboard-state";
 
 const DEFAULT_ERROR_MESSAGE = "Unable to load dashboard state.";
+const PROJECT_PATH_STORAGE_KEY = "ralph-dashboard:last-project-path";
+
+function normalizeProjectPath(value: string | null | undefined): string | null {
+  if (!value) {
+    return null;
+  }
+
+  const trimmed = value.trim();
+  return trimmed.length > 0 ? trimmed : null;
+}
 
+function readStoredProjectPath(): string | null {
+  if (typeof window === "undefined") {
+    return null;
+  }
+
+  return normalizeProjectPath(window.localStorage.getItem(PROJECT_PATH_STORAGE_KEY));
+}
+
+function persistProjectPath(projectPath: string): void {
+  if (typeof window === "undefined") {
+    return;
+  }
+
+  window.localStorage.setItem(PROJECT_PATH_STORAGE_KEY, projectPath);
+}
+
 function formatLastUpdated(isoTimestamp: string | undefined): string {
   if (!isoTimestamp) {
     return "Never";
@@ -26,10 +53,29 @@
 }
 
 function DashboardBody() {
-  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState();
+  const searchParams = useSearchParams();
+  const urlProjectPath = normalizeProjectPath(searchParams.get("path"));
+  const [selectedProjectPath, setSelectedProjectPath] = useState<string | undefined>(urlProjectPath ?? undefined);
+  const { data, error, isPending, isFetching, dataUpdatedAt } = useDashboardState(selectedProjectPath);
   const [showUpdated, setShowUpdated] = useState(false);
 
   useEffect(() => {
+    if (urlProjectPath) {
+      setSelectedProjectPath(urlProjectPath);
+      persistProjectPath(urlProjectPath);
+      return;
+    }
+
+    const storedPath = readStoredProjectPath();
+    if (storedPath) {
+      setSelectedProjectPath(storedPath);
+      return;
+    }
+
+    setSelectedProjectPath(undefined);
+  }, [urlProjectPath]);
+
+  useEffect(() => {
     if (!dataUpdatedAt) {
       return;
     }
@@ -39,12 +85,34 @@
     return () => window.clearTimeout(timeout);
   }, [dataUpdatedAt]);
 
+  useEffect(() => {
+    const resolvedProjectPath = normalizeProjectPath(data?.projectPath);
+    if (!resolvedProjectPath) {
+      return;
+    }
+
+    persistProjectPath(resolvedProjectPath);
+  }, [data?.projectPath]);
+
+  const currentProjectPath = data?.projectPath ?? selectedProjectPath ?? "Not configured";
+
+  const header = (
+    <header className="rounded-lg border border-border bg-card px-4 py-3 text-card-foreground md:px-5">
+      <h2 className="text-lg font-semibold tracking-tight">Run Overview</h2>
+      <p className="mt-1 text-sm text-muted-foreground">
+        Project path: <code className="text-foreground">{currentProjectPath}</code>
+      </p>
+    </header>
+  );
+
   if (isPending && !data) {
     return (
-      <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
-        <h2 className="text-lg font-medium">Run Overview</h2>
-        <p className="mt-2 text-sm text-muted-foreground">Loading live run state...</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
+          <p className="text-sm text-muted-foreground">Loading live run state...</p>
+        </section>
+      </div>
     );
   }
 
@@ -52,10 +120,12 @@
     const message = error instanceof Error ? error.message : DEFAULT_ERROR_MESSAGE;
 
     return (
-      <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
-        <h2 className="text-lg font-semibold">Run Overview</h2>
-        <p className="mt-2 text-sm text-red-200">{message}</p>
-      </section>
+      <div className="space-y-6">
+        {header}
+        <section className="rounded-lg border border-red-500/40 bg-red-500/10 p-6 text-card-foreground">
+          <p className="text-sm text-red-200">{message}</p>
+        </section>
+      </div>
     );
   }
 
@@ -64,6 +134,7 @@
 
   return (
     <div className="space-y-6">
+      {header}
       <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-5">
         <div className="flex flex-wrap items-center justify-between gap-2 text-sm">
           <div className="flex items-center gap-2">
diff --git a/hooks/use-dashboard-state.ts b/hooks/use-dashboard-state.ts
index 4022ce75ba86f6cb5b7b7ec3fb3b9959093f6728..42c7d3ef2d2800eb11b641642f0d18ebfc3cd9dc
--- a/hooks/use-dashboard-state.ts
+++ b/hooks/use-dashboard-state.ts
@@ -21,7 +21,7 @@
 async function fetchDashboardState(projectPath?: string): Promise<DashboardStateResponse> {
   const params = new URLSearchParams();
   if (projectPath) {
-    params.set("projectPath", projectPath);
+    params.set("path", projectPath);
   }
 
   const query = params.toString();

tokens used
27,607
Implemented item 15/17 with focused changes for project path configuration and persistence.

### What changed

1. `?path=` is now used end-to-end on the client
- Updated API request construction to send `path` instead of `projectPath`.
- File: `hooks/use-dashboard-state.ts`

2. URL `path` + localStorage project selection logic
- `LiveDashboard` now resolves project path in this order:
  - URL param `?path=...`
  - `localStorage` (`ralph-dashboard:last-project-path`)
  - fallback to server/env behavior (`/api/state` with no query)
- On successful data load, it persists the resolved path to localStorage.
- File: `components/LiveDashboard.tsx`

3. Current project path shown in the dashboard header
- Added a top header block in `LiveDashboard` that displays:
  - `Project path: <resolved path>` (or `Not configured` if missing)
- File: `components/LiveDashboard.tsx`

4. Tests for URL path behavior
- Added API coverage for `?path=` alias.
- Added hook test asserting client requests use `/api/state?path=...`.
- Files:
  - `__tests__/api-state.test.ts`
  - `__tests__/use-dashboard-state.test.tsx`

### Verification status

- `RALPH_PROJECT_PATH` env var: still supported server-side in `app/api/state/route.ts`.
- `?path=` URL parameter: supported server-side and now client-side.
- Current project path shown in header: implemented in `LiveDashboard`.
- Last selected project persisted in localStorage: implemented and restored on load.

### Test result

- Ran: `npm test`
- Result: all tests passing (`12` test files, `49` tests).
