OpenAI Codex v0.98.0 (research preview)
--------
workdir: /Users/mcbee/Projects/agent-dashboard
model: gpt-5.3-codex
provider: openai
approval: never
sandbox: danger-full-access
reasoning effort: none
reasoning summaries: auto
session id: 019c2f59-d1f6-7543-bbbe-e6b951c2647d
--------
user
You are working on the project: Ralph Dashboard

Goal: A real-time web UI for watching Ralph runs. Kanban-style PRD progress, live metrics, git state, test coverage — watch the magic happen.

Current Item (11/17): Metrics panel
Category: ui
Priority: 1

Description:
Panel showing code metrics: LOC, files, tests, coverage

Steps:
  1. Create components/MetricsPanel.tsx
  2. Show: total lines of code (with delta from start if available)
  3. Show: file count
  4. Show: test count
  5. Show: coverage percentage with color coding (red/yellow/green)
  6. Write unit tests in __tests__/MetricsPanel.test.tsx

Verification:
Component renders metrics correctly (unit test)

Please implement this item. After completion:
1. Ensure all tests pass
2. Verify the implementation meets the verification criteria
3. Keep changes focused on this item only

mcp startup: no servers

thinking
**Using task queue skill**
codex
I’m implementing item 11/17 (Metrics panel) and will keep scope limited to this feature plus its unit tests. I’m using the `do-work` skill because this request is a queued work item with explicit steps and verification.
exec
/bin/zsh -lc "ls -la /Users/mcbee/.agents/skills/do-work && sed -n '1,220p' /Users/mcbee/.agents/skills/do-work/SKILL.md" in /Users/mcbee/Projects/agent-dashboard succeeded in 215ms:
total 56
drwxr-xr-x  8 mcbee  staff   256 Feb  3 23:09 .
drwxr-xr-x  4 mcbee  staff   128 Feb  3 23:09 ..
-rw-r--r--  1 mcbee  staff    36 Feb  3 23:09 AGENTS.md
-rw-r--r--  1 mcbee  staff  4454 Feb  3 23:09 CHANGELOG.md
-rw-r--r--  1 mcbee  staff  2977 Feb  3 23:09 CLAUDE.md
-rw-r--r--  1 mcbee  staff    36 Feb  3 23:09 GEMINI.md
-rw-r--r--  1 mcbee  staff  4567 Feb  3 23:09 SKILL.md
drwxr-xr-x  7 mcbee  staff   224 Feb  3 23:09 actions
---
name: do-work
description: Task queue - add requests or process pending work
argument-hint: run | (task to capture) | verify | cleanup | version
upstream: https://raw.githubusercontent.com/bladnman/do-work/main/SKILL.md
---

# Do-Work Skill

A unified entry point for task capture and processing.


thinking
**Verifying skill usage requirements**
codex
I’ve loaded the `do-work` skill instructions and I’ll now check the `work` action details to align execution with its workflow while implementing this specific queue item.
exec
/bin/zsh -lc "sed -n '1,260p' /Users/mcbee/.agents/skills/do-work/actions/work.md" in /Users/mcbee/Projects/agent-dashboard succeeded in 214ms:
# Work Action

> **Part of the do-work skill.** Invoked when routing determines the user wants to process the queue. Processes requests from the `do-work/` folder in your project.

An orchestrated build system that processes request files created by the do action. Uses complexity triage to avoid unnecessary overhead - simple requests go straight to implementation, complex ones get planning and exploration first.

## Request Files as Living Logs

**Each request file becomes a complete historical record of the work performed.** As you process a request, you append sections documenting each phase:

1. **Triage** - Route decision and reasoning
2. **Plan** - Either the full plan (Route C) or "Planning not required" (Routes A/B)
3. **Exploration** - Codebase findings (Routes B/C)
4. **Implementation Summary** - What was changed
5. **Testing** - Test results and coverage

This traceability ensures:
- You can review what was planned vs what was done
- Failed requests show exactly where things went wrong
- Triage accuracy can be evaluated over time

thinking
**Confirming project files before coding**
codex
This item is Route A under the skill (specific files and clear scope), so I’m going straight to implementation after a quick scan of existing component/test patterns.
exec
/bin/zsh -lc 'rg --files' in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc 'ls -la' in /Users/mcbee/Projects/agent-dashboard succeeded in 237ms:
total 680
drwxr-xr-x   24 mcbee  staff     768 Feb  5 14:44 .
drwxr-xr-x    6 mcbee  staff     192 Feb  5 14:01 ..
-rw-r--r--    1 mcbee  staff      61 Feb  5 14:28 .eslintrc.json
drwxr-xr-x   12 mcbee  staff     384 Feb  5 14:49 .git
-rw-r--r--    1 mcbee  staff     400 Feb  5 14:31 .gitignore
drwxr-xr-x   11 mcbee  staff     352 Feb  5 14:32 .next
drwxr-xr-x    4 mcbee  staff     128 Feb  5 14:31 .ralph
-rw-r--r--    1 mcbee  staff    1450 Feb  5 14:28 README.md
drwxr-xr-x   10 mcbee  staff     320 Feb  5 14:48 __tests__
drwxr-xr-x    8 mcbee  staff     256 Feb  5 14:41 app
drwxr-xr-x    5 mcbee  staff     160 Feb  5 14:48 components
-rw-r--r--    1 mcbee  staff     481 Feb  5 14:29 components.json
drwxr-xr-x    7 mcbee  staff     224 Feb  5 14:41 lib
-rw-r--r--    1 mcbee  staff     228 Feb  5 14:28 next-env.d.ts
-rw-r--r--    1 mcbee  staff      92 Feb  5 14:28 next.config.mjs
drwxr-xr-x  399 mcbee  staff   12768 Feb  5 14:34 node_modules
-rw-r--r--    1 mcbee  staff  283646 Feb  5 14:34 package-lock.json
-rw-r--r--    1 mcbee  staff     851 Feb  5 14:34 package.json
-rw-r--r--    1 mcbee  staff     135 Feb  5 14:28 postcss.config.mjs
 succeeded in 264ms:
vitest.setup.ts
vitest.config.ts
tsconfig.json
components.json
lib/git-state.ts
lib/code-metrics.ts
lib/utils.ts
lib/coverage-state.ts
lib/ralph-state.ts
package.json
package-lock.json
__tests__/KanbanBoard.test.tsx
__tests__/code-metrics.test.ts
__tests__/GitPanel.test.tsx
__tests__/api-state.test.ts
__tests__/git-state.test.ts
__tests__/ProgressPanel.test.tsx
__tests__/ralph-state.test.ts
__tests__/example.test.ts
components/ProgressPanel.tsx

thinking
**Assessing metrics integration**
codex
I found existing panel patterns and metric utility modules; next I’m reading those to match style and wire the metrics panel without broad refactors.
exec
/bin/zsh -lc "sed -n '1,240p' components/GitPanel.tsx" in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc "sed -n '1,260p' lib/code-metrics.ts" in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc "sed -n '1,220p' components/ProgressPanel.tsx" in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc "sed -n '1,260p' app/api/state/route.ts" in /Users/mcbee/Projects/agent-dashboard succeeded in 287ms:
import { stat } from "node:fs/promises";
import path from "node:path";

import { NextResponse } from "next/server";

import { readCodeMetrics } from "@/lib/code-metrics";
import { readCoverageState } from "@/lib/coverage-state";
import { readGitState } from "@/lib/git-state";
import { getRalphUnifiedView } from "@/lib/ralph-state";

function resolveProjectPath(request: Request): string | null {
  const { searchParams } = new URL(request.url);

  const fromQuery = searchParams.get("projectPath") ?? searchParams.get("path");
  const fromEnv = process.env.RALPH_PROJECT_PATH;
  const selected = fromQuery ?? fromEnv ?? null;

  if (!selected) {
    return null;
  }
 succeeded in 302ms:
import { promises as fs } from "node:fs";
import path from "node:path";

export interface CodeMetrics {
  totalLoc: number;
  locByLanguage: Record<string, number>;
  fileCount: number;
  testFileCount: number;
  error: string | null;
}

export interface ReadCodeMetricsOptions {
  excludeDirectories?: string[];
}

const DEFAULT_EXCLUDED_DIRECTORIES = new Set([".git", "node_modules", ".next", ".ralph"]);

const EXTENSION_LANGUAGE_MAP: Record<string, string> = {
  ".ts": "TypeScript",
  ".tsx": "TypeScript",
 succeeded in 302ms:
"use client";

import React, { useState } from "react";

import type { GitState } from "@/lib/git-state";

type GitPanelData = Pick<GitState, "branch" | "commitCount" | "recentCommits" | "baseBranch" | "diffFromBase" | "error">;

interface GitPanelProps {
  git: GitPanelData;
}

export default function GitPanel({ git }: GitPanelProps) {
  const [copyStatus, setCopyStatus] = useState<"idle" | "copied" | "error">("idle");
  const commitsToShow = git.recentCommits.slice(0, 5);
  const canCopyBranch = Boolean(git.branch);
  const diffLabel = git.baseBranch ? `Diff vs ${git.baseBranch}` : "Diff summary";

  const handleCopyBranch = async () => {
    if (!git.branch) {
 succeeded in 302ms:
"use client";

import React, { useMemo } from "react";

import type { UnifiedPRDItem } from "@/lib/ralph-state";

interface ProgressPanelProps {
  items: UnifiedPRDItem[];
  startedAt: string | null;
  now?: Date;
}

function formatDuration(ms: number): string {
  const totalSeconds = Math.max(0, Math.floor(ms / 1000));
  const days = Math.floor(totalSeconds / 86400);
  const hours = Math.floor((totalSeconds % 86400) / 3600);
  const minutes = Math.floor((totalSeconds % 3600) / 60);
  const seconds = totalSeconds % 60;

  if (days > 0) {

thinking
**Reviewing page components**
exec
/bin/zsh -lc "sed -n '1,260p' __tests__/ProgressPanel.test.tsx" in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc "sed -n '1,260p' app/page.tsx" in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc "sed -n '1,260p' __tests__/GitPanel.test.tsx" in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc "sed -n '1,240p' lib/coverage-state.ts" in /Users/mcbee/Projects/agent-dashboard succeeded in 295ms:
export default function Home() {
  return (
    <section className="rounded-lg border border-border bg-card p-6 text-card-foreground">
      <h2 className="text-lg font-medium">Run Overview</h2>
      <p className="mt-2 text-sm text-muted-foreground">
        Ralph run metrics and kanban progress will render here.
      </p>
    </section>
  );
}
 succeeded in 291ms:
import React from "react";
import { cleanup, fireEvent, render, screen, waitFor } from "@testing-library/react";
import { afterEach, describe, expect, it, vi } from "vitest";

import GitPanel from "@/components/GitPanel";
import type { GitState } from "@/lib/git-state";

const baseGit: Pick<GitState, "branch" | "commitCount" | "recentCommits" | "baseBranch" | "diffFromBase" | "error"> = {
  branch: "feature/git-panel",
  commitCount: 42,
  recentCommits: [
    "feat: add git panel",
    "test: add git panel tests",
    "refactor: tidy panel layout",
    "fix: branch copy state",
    "chore: update styles",
    "docs: note git state panel",
  ],
  baseBranch: "main",
  diffFromBase: {
 succeeded in 289ms:
import { readFile } from "node:fs/promises";
import path from "node:path";

interface CoverageMetric {
  total: number;
  covered: number;
  skipped: number;
  pct: number;
}

interface CoverageSummaryTotal {
  lines: CoverageMetric;
  statements: CoverageMetric;
  functions: CoverageMetric;
  branches: CoverageMetric;
}

export interface CoverageState {
  available: boolean;
  summaryPath: string | null;
 succeeded in 299ms:
import React from "react";
import { cleanup, render, screen } from "@testing-library/react";
import { afterEach, describe, expect, it } from "vitest";

import ProgressPanel from "@/components/ProgressPanel";
import type { UnifiedPRDItem } from "@/lib/ralph-state";

const items: UnifiedPRDItem[] = [
  {
    id: 1,
    category: "setup",
    title: "Done Item A",
    description: "Done A",
    priority: 1,
    passes: true,
    verification: "Done A verification",
    steps: [],
    notes: "",
    status: "done",
    isCurrent: false,

thinking
**Assessing API types and metrics tests**
codex
I confirmed there’s no existing Metrics panel yet; I’m now checking API/type usage so the new component consumes the same shape used elsewhere and stays isolated.
exec
/bin/zsh -lc "sed -n '1,280p' __tests__/api-state.test.ts" in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc "sed -n '1,300p' lib/ralph-state.ts" in /Users/mcbee/Projects/agent-dashboardexec
/bin/zsh -lc "sed -n '1,260p' README.md" in /Users/mcbee/Projects/agent-dashboard succeeded in 257ms:
This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

 succeeded in 259ms:
import { promises as fs } from "node:fs";
import path from "node:path";

export interface Checkpoint {
  item_id: number;
  commit_sha: string;
  timestamp: string;
  files_changed: string[];
  tests_passed: boolean;
  route: string;
}

export interface RalphState {
  branch: string | null;
  prd_path: string | null;
  current_item: number | null;
  completed_items: number[];
  started_at: string | null;
  checkpoints: Checkpoint[];
  agent: string | null;
 succeeded in 263ms:
import os from "node:os";
import path from "node:path";
import { promises as fs } from "node:fs";

import { afterEach, describe, expect, it } from "vitest";

import { GET as healthGET } from "../app/api/health/route";
import { GET as stateGET } from "../app/api/state/route";

const createdDirs: string[] = [];
const createdFiles: string[] = [];

async function makeProjectFixture(): Promise<string> {
  const projectDir = await fs.mkdtemp(path.join(os.tmpdir(), "api-state-test-"));
  createdDirs.push(projectDir);

  await fs.mkdir(path.join(projectDir, ".ralph"), { recursive: true });
  await fs.writeFile(
    path.join(projectDir, ".ralph", "state.json"),
    JSON.stringify(

thinking
**Planning component props shape**
exec
/bin/zsh -lc "rg -n \"Metrics panel|metrics|coverage\" prd-ralph-dashboard.json && sed -n '1,260p' prd-ralph-dashboard.json" in /Users/mcbee/Projects/agent-dashboard succeeded in 213ms:
3:  "goal": "A real-time web UI for watching Ralph runs. Kanban-style PRD progress, live metrics, git state, test coverage \u2014 watch the magic happen.",
16:    "references": "Ralph CLI, Linear/Jira for kanban inspiration, Codecov for coverage UI"
93:      "title": "Code metrics reader",
94:      "description": "Module to gather code metrics: lines of code, file count, test count",
97:      "verification": "Unit tests pass for metrics calculation",
99:        "Create lib/code-metrics.ts",
102:        "Write unit tests in __tests__/code-metrics.test.ts"
109:      "title": "Test coverage reader",
110:      "description": "Module to parse test coverage reports (coverage.json, lcov, etc.)",
113:      "verification": "Unit tests pass for coverage parsing",
115:        "Create lib/coverage-reader.ts",
116:        "Support coverage.json (Vitest/Istanbul format)",
119:        "Write unit tests in __tests__/coverage-reader.test.ts"
127:      "description": "Next.js API routes to serve Ralph state, git state, metrics",
134:        "Return combined state: ralph, git, metrics, coverage",
199:      "title": "Metrics panel",
200:      "description": "Panel showing code metrics: LOC, files, tests, coverage",
203:      "verification": "Component renders metrics correctly (unit test)",
209:        "Show: coverage percentage with color coding (red/yellow/green)",
258:        "Layout: Kanban board (main area), sidebar (progress, git, metrics)",

thinking
**Planning component tests and props**
codex
I’ve confirmed the PRD details for item 11 and will now add a standalone `MetricsPanel` with an explicit props interface, plus focused tests covering rendering, LOC delta behavior, and coverage color thresholds.
exec
/bin/zsh -lc 'cat tsconfig.json && cat package.json && cat vitest.config.ts' in /Users/mcbee/Projects/agent-dashboard succeeded in 214ms:
{
  "compilerOptions": {
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {

thinking
**Assessing utility functions in utils.ts**
exec
/bin/zsh -lc 'cat lib/utils.ts' in /Users/mcbee/Projects/agent-dashboard succeeded in 212ms:
import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

thinking
**Designing coverage badge component**
codex
I’m now editing two files: adding `components/MetricsPanel.tsx` and `__tests__/MetricsPanel.test.tsx`. The tests will explicitly verify displayed metric values, LOC delta behavior, and red/yellow/green coverage styling thresholds.
file update
A /Users/mcbee/Projects/agent-dashboard/components/MetricsPanel.tsx
"use client";

import React, { useMemo } from "react";

interface MetricsPanelProps {
  totalLoc: number;
  startLoc?: number | null;
  fileCount: number;
  testCount: number;
  coveragePct: number | null;
}

function formatInteger(value: number): string {
  return new Intl.NumberFormat("en-US").format(value);
}

function coverageTone(coveragePct: number | null): "red" | "yellow" | "green" | "none" {
  if (coveragePct === null || !Number.isFinite(coveragePct)) {
    return "none";
  }

  if (coveragePct < 60) {
    return "red";
  }

  if (coveragePct < 80) {
    return "yellow";
  }

  return "green";
}

export default function MetricsPanel({ totalLoc, startLoc = null, fileCount, testCount, coveragePct }: MetricsPanelProps) {
  const locDelta = useMemo(() => {
    if (startLoc === null || !Number.isFinite(startLoc)) {
      return null;
    }

    return totalLoc - startLoc;
  }, [startLoc, totalLoc]);

  const coverage = useMemo(() => {
    const tone = coverageTone(coveragePct);
    const rounded = coveragePct === null || !Number.isFinite(coveragePct) ? null : Math.round(coveragePct);

    if (tone === "red") {
      return {
        badgeClass: "border-red-500/40 bg-red-500/10 text-red-700",
        value: `${rounded}%`,
      };
    }

    if (tone === "yellow") {
      return {
        badgeClass: "border-amber-500/40 bg-amber-500/10 text-amber-700",
        value: `${rounded}%`,
      };
    }

    if (tone === "green") {
      return {
        badgeClass: "border-green-500/40 bg-green-500/10 text-green-700",
        value: `${rounded}%`,
      };
    }

    return {
      badgeClass: "border-border bg-background text-muted-foreground",
      value: "N/A",
    };
  }, [coveragePct]);

  return (
    <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-6">
      <h2 className="text-lg font-semibold">Metrics</h2>

      <div className="mt-4 grid gap-3 sm:grid-cols-2">
        <div className="rounded-md border border-border bg-background/50 p-3">
          <p className="text-xs uppercase tracking-wide text-muted-foreground">Total LOC</p>
          <p className="mt-1 text-xl font-semibold">{formatInteger(totalLoc)}</p>
          <p className="mt-1 text-xs text-muted-foreground">
            {locDelta === null
              ? "No baseline available"
              : `${locDelta >= 0 ? "+" : ""}${formatInteger(locDelta)} from start`}
          </p>
        </div>

        <div className="rounded-md border border-border bg-background/50 p-3">
          <p className="text-xs uppercase tracking-wide text-muted-foreground">Files</p>
          <p className="mt-1 text-xl font-semibold">{formatInteger(fileCount)}</p>
        </div>

        <div className="rounded-md border border-border bg-background/50 p-3">
          <p className="text-xs uppercase tracking-wide text-muted-foreground">Tests</p>
          <p className="mt-1 text-xl font-semibold">{formatInteger(testCount)}</p>
        </div>

        <div className="rounded-md border border-border bg-background/50 p-3">
          <p className="text-xs uppercase tracking-wide text-muted-foreground">Coverage</p>
          <p
            aria-label="Coverage percentage"
            className={`mt-1 inline-flex rounded border px-2 py-1 text-sm font-semibold ${coverage.badgeClass}`}
          >
            {coverage.value}
          </p>
        </div>
      </div>
    </section>
  );
}
apply_patch(auto_approved=true) exited 0 in 36ms:
Success. Updated the following files:
A components/MetricsPanel.tsx
file update:
diff --git a/components/MetricsPanel.tsx b/components/MetricsPanel.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..7b3db8a705f1a89b06b28135c0d4f34f4f98db38
--- /dev/null
+++ b/components/MetricsPanel.tsx
@@ -0,0 +1,110 @@
+"use client";
+
+import React, { useMemo } from "react";
+
+interface MetricsPanelProps {
+  totalLoc: number;
+  startLoc?: number | null;
+  fileCount: number;
+  testCount: number;
+  coveragePct: number | null;
+}
+
+function formatInteger(value: number): string {
+  return new Intl.NumberFormat("en-US").format(value);
+}
+
+function coverageTone(coveragePct: number | null): "red" | "yellow" | "green" | "none" {
+  if (coveragePct === null || !Number.isFinite(coveragePct)) {
+    return "none";
+  }
+
+  if (coveragePct < 60) {
+    return "red";
+  }
+
+  if (coveragePct < 80) {
+    return "yellow";
+  }
+
+  return "green";
+}
+
+export default function MetricsPanel({ totalLoc, startLoc = null, fileCount, testCount, coveragePct }: MetricsPanelProps) {
+  const locDelta = useMemo(() => {
+    if (startLoc === null || !Number.isFinite(startLoc)) {
+      return null;
+    }
+
+    return totalLoc - startLoc;
+  }, [startLoc, totalLoc]);
+
+  const coverage = useMemo(() => {
+    const tone = coverageTone(coveragePct);
+    const rounded = coveragePct === null || !Number.isFinite(coveragePct) ? null : Math.round(coveragePct);
+
+    if (tone === "red") {
+      return {
+        badgeClass: "border-red-500/40 bg-red-500/10 text-red-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    if (tone === "yellow") {
+      return {
+        badgeClass: "border-amber-500/40 bg-amber-500/10 text-amber-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    if (tone === "green") {
+      return {
+        badgeClass: "border-green-500/40 bg-green-500/10 text-green-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    return {
+      badgeClass: "border-border bg-background text-muted-foreground",
+      value: "N/A",
+    };
+  }, [coveragePct]);
+
+  return (
+    <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-6">
+      <h2 className="text-lg font-semibold">Metrics</h2>
+
+      <div className="mt-4 grid gap-3 sm:grid-cols-2">
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Total LOC</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(totalLoc)}</p>
+          <p className="mt-1 text-xs text-muted-foreground">
+            {locDelta === null
+              ? "No baseline available"
+              : `${locDelta >= 0 ? "+" : ""}${formatInteger(locDelta)} from start`}
+          </p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Files</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(fileCount)}</p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Tests</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(testCount)}</p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Coverage</p>
+          <p
+            aria-label="Coverage percentage"
+            className={`mt-1 inline-flex rounded border px-2 py-1 text-sm font-semibold ${coverage.badgeClass}`}
+          >
+            {coverage.value}
+          </p>
+        </div>
+      </div>
+    </section>
+  );
+}

file update:
diff --git a/components/MetricsPanel.tsx b/components/MetricsPanel.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..7b3db8a705f1a89b06b28135c0d4f34f4f98db38
--- /dev/null
+++ b/components/MetricsPanel.tsx
@@ -0,0 +1,110 @@
+"use client";
+
+import React, { useMemo } from "react";
+
+interface MetricsPanelProps {
+  totalLoc: number;
+  startLoc?: number | null;
+  fileCount: number;
+  testCount: number;
+  coveragePct: number | null;
+}
+
+function formatInteger(value: number): string {
+  return new Intl.NumberFormat("en-US").format(value);
+}
+
+function coverageTone(coveragePct: number | null): "red" | "yellow" | "green" | "none" {
+  if (coveragePct === null || !Number.isFinite(coveragePct)) {
+    return "none";
+  }
+
+  if (coveragePct < 60) {
+    return "red";
+  }
+
+  if (coveragePct < 80) {
+    return "yellow";
+  }
+
+  return "green";
+}
+
+export default function MetricsPanel({ totalLoc, startLoc = null, fileCount, testCount, coveragePct }: MetricsPanelProps) {
+  const locDelta = useMemo(() => {
+    if (startLoc === null || !Number.isFinite(startLoc)) {
+      return null;
+    }
+
+    return totalLoc - startLoc;
+  }, [startLoc, totalLoc]);
+
+  const coverage = useMemo(() => {
+    const tone = coverageTone(coveragePct);
+    const rounded = coveragePct === null || !Number.isFinite(coveragePct) ? null : Math.round(coveragePct);
+
+    if (tone === "red") {
+      return {
+        badgeClass: "border-red-500/40 bg-red-500/10 text-red-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    if (tone === "yellow") {
+      return {
+        badgeClass: "border-amber-500/40 bg-amber-500/10 text-amber-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    if (tone === "green") {
+      return {
+        badgeClass: "border-green-500/40 bg-green-500/10 text-green-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    return {
+      badgeClass: "border-border bg-background text-muted-foreground",
+      value: "N/A",
+    };
+  }, [coveragePct]);
+
+  return (
+    <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-6">
+      <h2 className="text-lg font-semibold">Metrics</h2>
+
+      <div className="mt-4 grid gap-3 sm:grid-cols-2">
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Total LOC</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(totalLoc)}</p>
+          <p className="mt-1 text-xs text-muted-foreground">
+            {locDelta === null
+              ? "No baseline available"
+              : `${locDelta >= 0 ? "+" : ""}${formatInteger(locDelta)} from start`}
+          </p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Files</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(fileCount)}</p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Tests</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(testCount)}</p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Coverage</p>
+          <p
+            aria-label="Coverage percentage"
+            className={`mt-1 inline-flex rounded border px-2 py-1 text-sm font-semibold ${coverage.badgeClass}`}
+          >
+            {coverage.value}
+          </p>
+        </div>
+      </div>
+    </section>
+  );
+}

file update
A /Users/mcbee/Projects/agent-dashboard/__tests__/MetricsPanel.test.tsx
import React from "react";
import { cleanup, render, screen } from "@testing-library/react";
import { afterEach, describe, expect, it } from "vitest";

import MetricsPanel from "@/components/MetricsPanel";

afterEach(() => {
  cleanup();
});

describe("MetricsPanel", () => {
  it("renders LOC, delta, file count, test count, and green coverage", () => {
    render(<MetricsPanel totalLoc={12345} startLoc={12000} fileCount={321} testCount={48} coveragePct={92.4} />);

    expect(screen.getByText("12,345")).toBeInTheDocument();
    expect(screen.getByText("+345 from start")).toBeInTheDocument();
    expect(screen.getByText("321")).toBeInTheDocument();
    expect(screen.getByText("48")).toBeInTheDocument();

    const coverage = screen.getByLabelText("Coverage percentage");
    expect(coverage).toHaveTextContent("92%");
    expect(coverage).toHaveClass("text-green-700");
  });

  it("shows no baseline message when start LOC is unavailable", () => {
    render(<MetricsPanel totalLoc={500} startLoc={null} fileCount={20} testCount={10} coveragePct={70} />);

    expect(screen.getByText("500")).toBeInTheDocument();
    expect(screen.getByText("No baseline available")).toBeInTheDocument();

    const coverage = screen.getByLabelText("Coverage percentage");
    expect(coverage).toHaveTextContent("70%");
    expect(coverage).toHaveClass("text-amber-700");
  });

  it("shows negative delta and red coverage for low percentages", () => {
    render(<MetricsPanel totalLoc={780} startLoc={1000} fileCount={14} testCount={6} coveragePct={33.8} />);

    expect(screen.getByText("-220 from start")).toBeInTheDocument();

    const coverage = screen.getByLabelText("Coverage percentage");
    expect(coverage).toHaveTextContent("34%");
    expect(coverage).toHaveClass("text-red-700");
  });
});
apply_patch(auto_approved=true) exited 0 in 49ms:
Success. Updated the following files:
A __tests__/MetricsPanel.test.tsx
file update:
diff --git a/__tests__/MetricsPanel.test.tsx b/__tests__/MetricsPanel.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..b85a5967761112ef3ef9df6d8f9362e86261a761
--- /dev/null
+++ b/__tests__/MetricsPanel.test.tsx
@@ -0,0 +1,45 @@
+import React from "react";
+import { cleanup, render, screen } from "@testing-library/react";
+import { afterEach, describe, expect, it } from "vitest";
+
+import MetricsPanel from "@/components/MetricsPanel";
+
+afterEach(() => {
+  cleanup();
+});
+
+describe("MetricsPanel", () => {
+  it("renders LOC, delta, file count, test count, and green coverage", () => {
+    render(<MetricsPanel totalLoc={12345} startLoc={12000} fileCount={321} testCount={48} coveragePct={92.4} />);
+
+    expect(screen.getByText("12,345")).toBeInTheDocument();
+    expect(screen.getByText("+345 from start")).toBeInTheDocument();
+    expect(screen.getByText("321")).toBeInTheDocument();
+    expect(screen.getByText("48")).toBeInTheDocument();
+
+    const coverage = screen.getByLabelText("Coverage percentage");
+    expect(coverage).toHaveTextContent("92%");
+    expect(coverage).toHaveClass("text-green-700");
+  });
+
+  it("shows no baseline message when start LOC is unavailable", () => {
+    render(<MetricsPanel totalLoc={500} startLoc={null} fileCount={20} testCount={10} coveragePct={70} />);
+
+    expect(screen.getByText("500")).toBeInTheDocument();
+    expect(screen.getByText("No baseline available")).toBeInTheDocument();
+
+    const coverage = screen.getByLabelText("Coverage percentage");
+    expect(coverage).toHaveTextContent("70%");
+    expect(coverage).toHaveClass("text-amber-700");
+  });
+
+  it("shows negative delta and red coverage for low percentages", () => {
+    render(<MetricsPanel totalLoc={780} startLoc={1000} fileCount={14} testCount={6} coveragePct={33.8} />);
+
+    expect(screen.getByText("-220 from start")).toBeInTheDocument();
+
+    const coverage = screen.getByLabelText("Coverage percentage");
+    expect(coverage).toHaveTextContent("34%");
+    expect(coverage).toHaveClass("text-red-700");
+  });
+});
diff --git a/components/MetricsPanel.tsx b/components/MetricsPanel.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..7b3db8a705f1a89b06b28135c0d4f34f4f98db38
--- /dev/null
+++ b/components/MetricsPanel.tsx
@@ -0,0 +1,110 @@
+"use client";
+
+import React, { useMemo } from "react";
+
+interface MetricsPanelProps {
+  totalLoc: number;
+  startLoc?: number | null;
+  fileCount: number;
+  testCount: number;
+  coveragePct: number | null;
+}
+
+function formatInteger(value: number): string {
+  return new Intl.NumberFormat("en-US").format(value);
+}
+
+function coverageTone(coveragePct: number | null): "red" | "yellow" | "green" | "none" {
+  if (coveragePct === null || !Number.isFinite(coveragePct)) {
+    return "none";
+  }
+
+  if (coveragePct < 60) {
+    return "red";
+  }
+
+  if (coveragePct < 80) {
+    return "yellow";
+  }
+
+  return "green";
+}
+
+export default function MetricsPanel({ totalLoc, startLoc = null, fileCount, testCount, coveragePct }: MetricsPanelProps) {
+  const locDelta = useMemo(() => {
+    if (startLoc === null || !Number.isFinite(startLoc)) {
+      return null;
+    }
+
+    return totalLoc - startLoc;
+  }, [startLoc, totalLoc]);
+
+  const coverage = useMemo(() => {
+    const tone = coverageTone(coveragePct);
+    const rounded = coveragePct === null || !Number.isFinite(coveragePct) ? null : Math.round(coveragePct);
+
+    if (tone === "red") {
+      return {
+        badgeClass: "border-red-500/40 bg-red-500/10 text-red-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    if (tone === "yellow") {
+      return {
+        badgeClass: "border-amber-500/40 bg-amber-500/10 text-amber-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    if (tone === "green") {
+      return {
+        badgeClass: "border-green-500/40 bg-green-500/10 text-green-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    return {
+      badgeClass: "border-border bg-background text-muted-foreground",
+      value: "N/A",
+    };
+  }, [coveragePct]);
+
+  return (
+    <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-6">
+      <h2 className="text-lg font-semibold">Metrics</h2>
+
+      <div className="mt-4 grid gap-3 sm:grid-cols-2">
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Total LOC</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(totalLoc)}</p>
+          <p className="mt-1 text-xs text-muted-foreground">
+            {locDelta === null
+              ? "No baseline available"
+              : `${locDelta >= 0 ? "+" : ""}${formatInteger(locDelta)} from start`}
+          </p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Files</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(fileCount)}</p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Tests</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(testCount)}</p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Coverage</p>
+          <p
+            aria-label="Coverage percentage"
+            className={`mt-1 inline-flex rounded border px-2 py-1 text-sm font-semibold ${coverage.badgeClass}`}
+          >
+            {coverage.value}
+          </p>
+        </div>
+      </div>
+    </section>
+  );
+}

file update:
diff --git a/__tests__/MetricsPanel.test.tsx b/__tests__/MetricsPanel.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..b85a5967761112ef3ef9df6d8f9362e86261a761
--- /dev/null
+++ b/__tests__/MetricsPanel.test.tsx
@@ -0,0 +1,45 @@
+import React from "react";
+import { cleanup, render, screen } from "@testing-library/react";
+import { afterEach, describe, expect, it } from "vitest";
+
+import MetricsPanel from "@/components/MetricsPanel";
+
+afterEach(() => {
+  cleanup();
+});
+
+describe("MetricsPanel", () => {
+  it("renders LOC, delta, file count, test count, and green coverage", () => {
+    render(<MetricsPanel totalLoc={12345} startLoc={12000} fileCount={321} testCount={48} coveragePct={92.4} />);
+
+    expect(screen.getByText("12,345")).toBeInTheDocument();
+    expect(screen.getByText("+345 from start")).toBeInTheDocument();
+    expect(screen.getByText("321")).toBeInTheDocument();
+    expect(screen.getByText("48")).toBeInTheDocument();
+
+    const coverage = screen.getByLabelText("Coverage percentage");
+    expect(coverage).toHaveTextContent("92%");
+    expect(coverage).toHaveClass("text-green-700");
+  });
+
+  it("shows no baseline message when start LOC is unavailable", () => {
+    render(<MetricsPanel totalLoc={500} startLoc={null} fileCount={20} testCount={10} coveragePct={70} />);
+
+    expect(screen.getByText("500")).toBeInTheDocument();
+    expect(screen.getByText("No baseline available")).toBeInTheDocument();
+
+    const coverage = screen.getByLabelText("Coverage percentage");
+    expect(coverage).toHaveTextContent("70%");
+    expect(coverage).toHaveClass("text-amber-700");
+  });
+
+  it("shows negative delta and red coverage for low percentages", () => {
+    render(<MetricsPanel totalLoc={780} startLoc={1000} fileCount={14} testCount={6} coveragePct={33.8} />);
+
+    expect(screen.getByText("-220 from start")).toBeInTheDocument();
+
+    const coverage = screen.getByLabelText("Coverage percentage");
+    expect(coverage).toHaveTextContent("34%");
+    expect(coverage).toHaveClass("text-red-700");
+  });
+});
diff --git a/components/MetricsPanel.tsx b/components/MetricsPanel.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..7b3db8a705f1a89b06b28135c0d4f34f4f98db38
--- /dev/null
+++ b/components/MetricsPanel.tsx
@@ -0,0 +1,110 @@
+"use client";
+
+import React, { useMemo } from "react";
+
+interface MetricsPanelProps {
+  totalLoc: number;
+  startLoc?: number | null;
+  fileCount: number;
+  testCount: number;
+  coveragePct: number | null;
+}
+
+function formatInteger(value: number): string {
+  return new Intl.NumberFormat("en-US").format(value);
+}
+
+function coverageTone(coveragePct: number | null): "red" | "yellow" | "green" | "none" {
+  if (coveragePct === null || !Number.isFinite(coveragePct)) {
+    return "none";
+  }
+
+  if (coveragePct < 60) {
+    return "red";
+  }
+
+  if (coveragePct < 80) {
+    return "yellow";
+  }
+
+  return "green";
+}
+
+export default function MetricsPanel({ totalLoc, startLoc = null, fileCount, testCount, coveragePct }: MetricsPanelProps) {
+  const locDelta = useMemo(() => {
+    if (startLoc === null || !Number.isFinite(startLoc)) {
+      return null;
+    }
+
+    return totalLoc - startLoc;
+  }, [startLoc, totalLoc]);
+
+  const coverage = useMemo(() => {
+    const tone = coverageTone(coveragePct);
+    const rounded = coveragePct === null || !Number.isFinite(coveragePct) ? null : Math.round(coveragePct);
+
+    if (tone === "red") {
+      return {
+        badgeClass: "border-red-500/40 bg-red-500/10 text-red-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    if (tone === "yellow") {
+      return {
+        badgeClass: "border-amber-500/40 bg-amber-500/10 text-amber-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    if (tone === "green") {
+      return {
+        badgeClass: "border-green-500/40 bg-green-500/10 text-green-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    return {
+      badgeClass: "border-border bg-background text-muted-foreground",
+      value: "N/A",
+    };
+  }, [coveragePct]);
+
+  return (
+    <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-6">
+      <h2 className="text-lg font-semibold">Metrics</h2>
+
+      <div className="mt-4 grid gap-3 sm:grid-cols-2">
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Total LOC</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(totalLoc)}</p>
+          <p className="mt-1 text-xs text-muted-foreground">
+            {locDelta === null
+              ? "No baseline available"
+              : `${locDelta >= 0 ? "+" : ""}${formatInteger(locDelta)} from start`}
+          </p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Files</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(fileCount)}</p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Tests</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(testCount)}</p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Coverage</p>
+          <p
+            aria-label="Coverage percentage"
+            className={`mt-1 inline-flex rounded border px-2 py-1 text-sm font-semibold ${coverage.badgeClass}`}
+          >
+            {coverage.value}
+          </p>
+        </div>
+      </div>
+    </section>
+  );
+}


thinking
**Running full test suite**
codex
The component and tests are in place; I’m running the full test suite now to verify this item doesn’t regress existing behavior and meets the verification criteria.
exec
/bin/zsh -lc 'npm test' in /Users/mcbee/Projects/agent-dashboard succeeded in 1.26s:

> ralph-dashboard@0.1.0 test
> vitest run


 RUN  v4.0.18 /Users/mcbee/Projects/agent-dashboard

 ✓ __tests__/code-metrics.test.ts (3 tests) 29ms
 ✓ __tests__/ralph-state.test.ts (9 tests) 23ms
 ✓ __tests__/git-state.test.ts (5 tests) 4ms
 ✓ __tests__/example.test.ts (1 test) 18ms
 ✓ __tests__/ProgressPanel.test.tsx (2 tests) 74ms
 ✓ __tests__/MetricsPanel.test.tsx (3 tests) 40ms
 ✓ __tests__/api-state.test.ts (6 tests) 51ms
 ✓ __tests__/GitPanel.test.tsx (2 tests) 81ms
 ✓ __tests__/KanbanBoard.test.tsx (3 tests) 108ms

 Test Files  9 passed (9)
      Tests  34 passed (34)
   Start at  14:50:06
file update:
diff --git a/__tests__/MetricsPanel.test.tsx b/__tests__/MetricsPanel.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..b85a5967761112ef3ef9df6d8f9362e86261a761
--- /dev/null
+++ b/__tests__/MetricsPanel.test.tsx
@@ -0,0 +1,45 @@
+import React from "react";
+import { cleanup, render, screen } from "@testing-library/react";
+import { afterEach, describe, expect, it } from "vitest";
+
+import MetricsPanel from "@/components/MetricsPanel";
+
+afterEach(() => {
+  cleanup();
+});
+
+describe("MetricsPanel", () => {
+  it("renders LOC, delta, file count, test count, and green coverage", () => {
+    render(<MetricsPanel totalLoc={12345} startLoc={12000} fileCount={321} testCount={48} coveragePct={92.4} />);
+
+    expect(screen.getByText("12,345")).toBeInTheDocument();
+    expect(screen.getByText("+345 from start")).toBeInTheDocument();
+    expect(screen.getByText("321")).toBeInTheDocument();
+    expect(screen.getByText("48")).toBeInTheDocument();
+
+    const coverage = screen.getByLabelText("Coverage percentage");
+    expect(coverage).toHaveTextContent("92%");
+    expect(coverage).toHaveClass("text-green-700");
+  });
+
+  it("shows no baseline message when start LOC is unavailable", () => {
+    render(<MetricsPanel totalLoc={500} startLoc={null} fileCount={20} testCount={10} coveragePct={70} />);
+
+    expect(screen.getByText("500")).toBeInTheDocument();
+    expect(screen.getByText("No baseline available")).toBeInTheDocument();
+
+    const coverage = screen.getByLabelText("Coverage percentage");
+    expect(coverage).toHaveTextContent("70%");
+    expect(coverage).toHaveClass("text-amber-700");
+  });
+
+  it("shows negative delta and red coverage for low percentages", () => {
+    render(<MetricsPanel totalLoc={780} startLoc={1000} fileCount={14} testCount={6} coveragePct={33.8} />);
+
+    expect(screen.getByText("-220 from start")).toBeInTheDocument();
+
+    const coverage = screen.getByLabelText("Coverage percentage");
+    expect(coverage).toHaveTextContent("34%");
+    expect(coverage).toHaveClass("text-red-700");
+  });
+});
diff --git a/components/MetricsPanel.tsx b/components/MetricsPanel.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..7b3db8a705f1a89b06b28135c0d4f34f4f98db38
--- /dev/null
+++ b/components/MetricsPanel.tsx
@@ -0,0 +1,110 @@
+"use client";
+
+import React, { useMemo } from "react";
+
+interface MetricsPanelProps {
+  totalLoc: number;
+  startLoc?: number | null;
+  fileCount: number;
+  testCount: number;
+  coveragePct: number | null;
+}
+
+function formatInteger(value: number): string {
+  return new Intl.NumberFormat("en-US").format(value);
+}
+
+function coverageTone(coveragePct: number | null): "red" | "yellow" | "green" | "none" {
+  if (coveragePct === null || !Number.isFinite(coveragePct)) {
+    return "none";
+  }
+
+  if (coveragePct < 60) {
+    return "red";
+  }
+
+  if (coveragePct < 80) {
+    return "yellow";
+  }
+
+  return "green";
+}
+
+export default function MetricsPanel({ totalLoc, startLoc = null, fileCount, testCount, coveragePct }: MetricsPanelProps) {
+  const locDelta = useMemo(() => {
+    if (startLoc === null || !Number.isFinite(startLoc)) {
+      return null;
+    }
+
+    return totalLoc - startLoc;
+  }, [startLoc, totalLoc]);
+
+  const coverage = useMemo(() => {
+    const tone = coverageTone(coveragePct);
+    const rounded = coveragePct === null || !Number.isFinite(coveragePct) ? null : Math.round(coveragePct);
+
+    if (tone === "red") {
+      return {
+        badgeClass: "border-red-500/40 bg-red-500/10 text-red-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    if (tone === "yellow") {
+      return {
+        badgeClass: "border-amber-500/40 bg-amber-500/10 text-amber-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    if (tone === "green") {
+      return {
+        badgeClass: "border-green-500/40 bg-green-500/10 text-green-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    return {
+      badgeClass: "border-border bg-background text-muted-foreground",
+      value: "N/A",
+    };
+  }, [coveragePct]);
+
+  return (
+    <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-6">
+      <h2 className="text-lg font-semibold">Metrics</h2>
+
+      <div className="mt-4 grid gap-3 sm:grid-cols-2">
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Total LOC</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(totalLoc)}</p>
+          <p className="mt-1 text-xs text-muted-foreground">
+            {locDelta === null
+              ? "No baseline available"
+              : `${locDelta >= 0 ? "+" : ""}${formatInteger(locDelta)} from start`}
+          </p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Files</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(fileCount)}</p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Tests</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(testCount)}</p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Coverage</p>
+          <p
+            aria-label="Coverage percentage"
+            className={`mt-1 inline-flex rounded border px-2 py-1 text-sm font-semibold ${coverage.badgeClass}`}
+          >
+            {coverage.value}
+          </p>
+        </div>
+      </div>
+    </section>
+  );
+}


thinking
**Planning focused change verification**
codex
All tests pass, including the new Metrics panel tests. I’ll quickly confirm the diff is limited to this item’s files before I summarize.
exec
/bin/zsh -lc 'git status --short' in /Users/mcbee/Projects/agent-dashboard succeeded in 233ms:
 M .ralph/current.log
 M .ralph/state.json
 M prd-ralph-dashboard.json
?? __tests__/MetricsPanel.test.tsx
?? components/MetricsPanel.tsx
file update:
diff --git a/__tests__/MetricsPanel.test.tsx b/__tests__/MetricsPanel.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..b85a5967761112ef3ef9df6d8f9362e86261a761
--- /dev/null
+++ b/__tests__/MetricsPanel.test.tsx
@@ -0,0 +1,45 @@
+import React from "react";
+import { cleanup, render, screen } from "@testing-library/react";
+import { afterEach, describe, expect, it } from "vitest";
+
+import MetricsPanel from "@/components/MetricsPanel";
+
+afterEach(() => {
+  cleanup();
+});
+
+describe("MetricsPanel", () => {
+  it("renders LOC, delta, file count, test count, and green coverage", () => {
+    render(<MetricsPanel totalLoc={12345} startLoc={12000} fileCount={321} testCount={48} coveragePct={92.4} />);
+
+    expect(screen.getByText("12,345")).toBeInTheDocument();
+    expect(screen.getByText("+345 from start")).toBeInTheDocument();
+    expect(screen.getByText("321")).toBeInTheDocument();
+    expect(screen.getByText("48")).toBeInTheDocument();
+
+    const coverage = screen.getByLabelText("Coverage percentage");
+    expect(coverage).toHaveTextContent("92%");
+    expect(coverage).toHaveClass("text-green-700");
+  });
+
+  it("shows no baseline message when start LOC is unavailable", () => {
+    render(<MetricsPanel totalLoc={500} startLoc={null} fileCount={20} testCount={10} coveragePct={70} />);
+
+    expect(screen.getByText("500")).toBeInTheDocument();
+    expect(screen.getByText("No baseline available")).toBeInTheDocument();
+
+    const coverage = screen.getByLabelText("Coverage percentage");
+    expect(coverage).toHaveTextContent("70%");
+    expect(coverage).toHaveClass("text-amber-700");
+  });
+
+  it("shows negative delta and red coverage for low percentages", () => {
+    render(<MetricsPanel totalLoc={780} startLoc={1000} fileCount={14} testCount={6} coveragePct={33.8} />);
+
+    expect(screen.getByText("-220 from start")).toBeInTheDocument();
+
+    const coverage = screen.getByLabelText("Coverage percentage");
+    expect(coverage).toHaveTextContent("34%");
+    expect(coverage).toHaveClass("text-red-700");
+  });
+});
diff --git a/components/MetricsPanel.tsx b/components/MetricsPanel.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..7b3db8a705f1a89b06b28135c0d4f34f4f98db38
--- /dev/null
+++ b/components/MetricsPanel.tsx
@@ -0,0 +1,110 @@
+"use client";
+
+import React, { useMemo } from "react";
+
+interface MetricsPanelProps {
+  totalLoc: number;
+  startLoc?: number | null;
+  fileCount: number;
+  testCount: number;
+  coveragePct: number | null;
+}
+
+function formatInteger(value: number): string {
+  return new Intl.NumberFormat("en-US").format(value);
+}
+
+function coverageTone(coveragePct: number | null): "red" | "yellow" | "green" | "none" {
+  if (coveragePct === null || !Number.isFinite(coveragePct)) {
+    return "none";
+  }
+
+  if (coveragePct < 60) {
+    return "red";
+  }
+
+  if (coveragePct < 80) {
+    return "yellow";
+  }
+
+  return "green";
+}
+
+export default function MetricsPanel({ totalLoc, startLoc = null, fileCount, testCount, coveragePct }: MetricsPanelProps) {
+  const locDelta = useMemo(() => {
+    if (startLoc === null || !Number.isFinite(startLoc)) {
+      return null;
+    }
+
+    return totalLoc - startLoc;
+  }, [startLoc, totalLoc]);
+
+  const coverage = useMemo(() => {
+    const tone = coverageTone(coveragePct);
+    const rounded = coveragePct === null || !Number.isFinite(coveragePct) ? null : Math.round(coveragePct);
+
+    if (tone === "red") {
+      return {
+        badgeClass: "border-red-500/40 bg-red-500/10 text-red-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    if (tone === "yellow") {
+      return {
+        badgeClass: "border-amber-500/40 bg-amber-500/10 text-amber-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    if (tone === "green") {
+      return {
+        badgeClass: "border-green-500/40 bg-green-500/10 text-green-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    return {
+      badgeClass: "border-border bg-background text-muted-foreground",
+      value: "N/A",
+    };
+  }, [coveragePct]);
+
+  return (
+    <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-6">
+      <h2 className="text-lg font-semibold">Metrics</h2>
+
+      <div className="mt-4 grid gap-3 sm:grid-cols-2">
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Total LOC</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(totalLoc)}</p>
+          <p className="mt-1 text-xs text-muted-foreground">
+            {locDelta === null
+              ? "No baseline available"
+              : `${locDelta >= 0 ? "+" : ""}${formatInteger(locDelta)} from start`}
+          </p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Files</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(fileCount)}</p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Tests</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(testCount)}</p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Coverage</p>
+          <p
+            aria-label="Coverage percentage"
+            className={`mt-1 inline-flex rounded border px-2 py-1 text-sm font-semibold ${coverage.badgeClass}`}
+          >
+            {coverage.value}
+          </p>
+        </div>
+      </div>
+    </section>
+  );
+}


thinking
**Summarizing dirty files and verification**
codex
Implemented item 11/17 with focused changes:

- Added `components/MetricsPanel.tsx`
- Added `__tests__/MetricsPanel.test.tsx`

What the component now shows:

- Total LOC
- LOC delta from start when `startLoc` is provided (`+/-N from start`)
- File count
- Test count
- Coverage percentage with color coding:
  - Red: `< 60`
  - Yellow: `60-79`
  - Green: `>= 80`
  - `N/A` when coverage is unavailable

Verification status:

- Unit tests added for rendering correctness, LOC delta behavior, and coverage color thresholds in `__tests__/MetricsPanel.test.tsx`
- Full test suite passes: `34 passed`, `0 failed`

Scope kept tight:

- Only new files for this item were added (`components/MetricsPanel.tsx`, `__tests__/MetricsPanel.test.tsx`)
- Existing modified files shown in git status (`.ralph/*`, `prd-ralph-dashboard.json`) were pre-existing workspace changes and were not altered by this implementation.
file update:
diff --git a/__tests__/MetricsPanel.test.tsx b/__tests__/MetricsPanel.test.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..b85a5967761112ef3ef9df6d8f9362e86261a761
--- /dev/null
+++ b/__tests__/MetricsPanel.test.tsx
@@ -0,0 +1,45 @@
+import React from "react";
+import { cleanup, render, screen } from "@testing-library/react";
+import { afterEach, describe, expect, it } from "vitest";
+
+import MetricsPanel from "@/components/MetricsPanel";
+
+afterEach(() => {
+  cleanup();
+});
+
+describe("MetricsPanel", () => {
+  it("renders LOC, delta, file count, test count, and green coverage", () => {
+    render(<MetricsPanel totalLoc={12345} startLoc={12000} fileCount={321} testCount={48} coveragePct={92.4} />);
+
+    expect(screen.getByText("12,345")).toBeInTheDocument();
+    expect(screen.getByText("+345 from start")).toBeInTheDocument();
+    expect(screen.getByText("321")).toBeInTheDocument();
+    expect(screen.getByText("48")).toBeInTheDocument();
+
+    const coverage = screen.getByLabelText("Coverage percentage");
+    expect(coverage).toHaveTextContent("92%");
+    expect(coverage).toHaveClass("text-green-700");
+  });
+
+  it("shows no baseline message when start LOC is unavailable", () => {
+    render(<MetricsPanel totalLoc={500} startLoc={null} fileCount={20} testCount={10} coveragePct={70} />);
+
+    expect(screen.getByText("500")).toBeInTheDocument();
+    expect(screen.getByText("No baseline available")).toBeInTheDocument();
+
+    const coverage = screen.getByLabelText("Coverage percentage");
+    expect(coverage).toHaveTextContent("70%");
+    expect(coverage).toHaveClass("text-amber-700");
+  });
+
+  it("shows negative delta and red coverage for low percentages", () => {
+    render(<MetricsPanel totalLoc={780} startLoc={1000} fileCount={14} testCount={6} coveragePct={33.8} />);
+
+    expect(screen.getByText("-220 from start")).toBeInTheDocument();
+
+    const coverage = screen.getByLabelText("Coverage percentage");
+    expect(coverage).toHaveTextContent("34%");
+    expect(coverage).toHaveClass("text-red-700");
+  });
+});
diff --git a/components/MetricsPanel.tsx b/components/MetricsPanel.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..7b3db8a705f1a89b06b28135c0d4f34f4f98db38
--- /dev/null
+++ b/components/MetricsPanel.tsx
@@ -0,0 +1,110 @@
+"use client";
+
+import React, { useMemo } from "react";
+
+interface MetricsPanelProps {
+  totalLoc: number;
+  startLoc?: number | null;
+  fileCount: number;
+  testCount: number;
+  coveragePct: number | null;
+}
+
+function formatInteger(value: number): string {
+  return new Intl.NumberFormat("en-US").format(value);
+}
+
+function coverageTone(coveragePct: number | null): "red" | "yellow" | "green" | "none" {
+  if (coveragePct === null || !Number.isFinite(coveragePct)) {
+    return "none";
+  }
+
+  if (coveragePct < 60) {
+    return "red";
+  }
+
+  if (coveragePct < 80) {
+    return "yellow";
+  }
+
+  return "green";
+}
+
+export default function MetricsPanel({ totalLoc, startLoc = null, fileCount, testCount, coveragePct }: MetricsPanelProps) {
+  const locDelta = useMemo(() => {
+    if (startLoc === null || !Number.isFinite(startLoc)) {
+      return null;
+    }
+
+    return totalLoc - startLoc;
+  }, [startLoc, totalLoc]);
+
+  const coverage = useMemo(() => {
+    const tone = coverageTone(coveragePct);
+    const rounded = coveragePct === null || !Number.isFinite(coveragePct) ? null : Math.round(coveragePct);
+
+    if (tone === "red") {
+      return {
+        badgeClass: "border-red-500/40 bg-red-500/10 text-red-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    if (tone === "yellow") {
+      return {
+        badgeClass: "border-amber-500/40 bg-amber-500/10 text-amber-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    if (tone === "green") {
+      return {
+        badgeClass: "border-green-500/40 bg-green-500/10 text-green-700",
+        value: `${rounded}%`,
+      };
+    }
+
+    return {
+      badgeClass: "border-border bg-background text-muted-foreground",
+      value: "N/A",
+    };
+  }, [coveragePct]);
+
+  return (
+    <section className="rounded-lg border border-border bg-card p-4 text-card-foreground md:p-6">
+      <h2 className="text-lg font-semibold">Metrics</h2>
+
+      <div className="mt-4 grid gap-3 sm:grid-cols-2">
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Total LOC</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(totalLoc)}</p>
+          <p className="mt-1 text-xs text-muted-foreground">
+            {locDelta === null
+              ? "No baseline available"
+              : `${locDelta >= 0 ? "+" : ""}${formatInteger(locDelta)} from start`}
+          </p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Files</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(fileCount)}</p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Tests</p>
+          <p className="mt-1 text-xl font-semibold">{formatInteger(testCount)}</p>
+        </div>
+
+        <div className="rounded-md border border-border bg-background/50 p-3">
+          <p className="text-xs uppercase tracking-wide text-muted-foreground">Coverage</p>
+          <p
+            aria-label="Coverage percentage"
+            className={`mt-1 inline-flex rounded border px-2 py-1 text-sm font-semibold ${coverage.badgeClass}`}
+          >
+            {coverage.value}
+          </p>
+        </div>
+      </div>
+    </section>
+  );
+}

tokens used
31,790
Implemented item 11/17 with focused changes:

- Added `components/MetricsPanel.tsx`
- Added `__tests__/MetricsPanel.test.tsx`

What the component now shows:

- Total LOC
- LOC delta from start when `startLoc` is provided (`+/-N from start`)
- File count
- Test count
- Coverage percentage with color coding:
  - Red: `< 60`
  - Yellow: `60-79`
  - Green: `>= 80`
  - `N/A` when coverage is unavailable

Verification status:

- Unit tests added for rendering correctness, LOC delta behavior, and coverage color thresholds in `__tests__/MetricsPanel.test.tsx`
- Full test suite passes: `34 passed`, `0 failed`

Scope kept tight:

- Only new files for this item were added (`components/MetricsPanel.tsx`, `__tests__/MetricsPanel.test.tsx`)
- Existing modified files shown in git status (`.ralph/*`, `prd-ralph-dashboard.json`) were pre-existing workspace changes and were not altered by this implementation.
